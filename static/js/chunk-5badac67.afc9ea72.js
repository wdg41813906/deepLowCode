(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5badac67"],{"057f":function(t,e,i){var r=i("fc6a"),s=i("241c").f,o={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return s(t)}catch(e){return n.slice()}};t.exports.f=function(t){return n&&"[object Window]"==o.call(t)?a(t):s(r(t))}},"0da8":function(t,e,i){},"39da":function(t,e,i){},"3ca3":function(t,e,i){"use strict";var r=i("6547").charAt,s=i("69f3"),o=i("7dd0"),n="String Iterator",a=s.set,d=s.getterFor(n);o(String,"String",(function(t){a(this,{type:n,string:String(t),index:0})}),(function(){var t,e=d(this),i=e.string,s=e.index;return s>=i.length?{value:void 0,done:!0}:(t=r(i,s),e.index+=t.length,{value:t,done:!1})}))},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"55c0":function(t,e,i){"use strict";i.r(e);var r,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"three_setting"},[i("div",[i("Conditions",{attrs:{sumval:t.sumval,departlist_str:t.departlist,mycode:t.mycode,worktype:t.worktype,show_click:t.show_click},on:{"update:sumval":function(e){t.sumval=e}}})],1)])},o=[],n=(i("a9e3"),i("53ca"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"three_setting"},[i("div",{staticClass:"fd-nav-content"},[i("section",{staticClass:"dingflow-design"},[i("div",{staticClass:"zoom_div"},[i("div",{staticClass:"text_right"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.reload()}}},[t._v("重置")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1),i("div",{staticClass:"zoom"},[i("div",{class:"zoom-out"+(50==t.nowVal?" disabled":""),on:{click:function(e){return t.zoomSize(1)}}}),i("span",[t._v(t._s(t.nowVal)+"%")]),i("div",{class:"zoom-in"+(300==t.nowVal?" disabled":""),on:{click:function(e){return t.zoomSize(2)}}})])]),i("div",{staticClass:"box-scale",style:"transform: scale("+t.nowVal/100+"); transform-origin: 50% 0px 0px;",attrs:{id:"box-scale"}},[i("nodeWrapM",{attrs:{nodeConfig:t.nodeConfig,flowPermission:t.flowPermission,isTried:t.isTried,directorMaxLevel:t.directorMaxLevel,tableId:t.tableId,departlist_look:t.depart_list_all,alldepart:t.alldepart},on:{"update:nodeConfig":function(e){t.nodeConfig=e},"update:node-config":function(e){t.nodeConfig=e},"update:flowPermission":function(e){t.flowPermission=e},"update:flow-permission":function(e){t.flowPermission=e},"update:isTried":function(e){t.isTried=e},"update:is-tried":function(e){t.isTried=e},"update:departlist_look":function(e){t.depart_list_all=e}}}),t._m(0)],1)])]),i("el-dialog",{staticClass:"audit_other_alert",attrs:{title:"提示",visible:t.tipVisible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(e){t.tipVisible=e}}},[i("div",{staticClass:"ant-confirm-body"},[i("div",{staticClass:"ant-confirm-content"},[i("div",[i("p",{staticClass:"error-modal-desc"},[t._v("以下内容不完善，需进行修改")]),i("div",{staticClass:"error-modal-list"},t._l(t.tipList,(function(e,r){return i("div",{key:r,staticClass:"error-modal-item"},[i("div",{staticClass:"error-modal-item-label"},[t._v(t._s(e.name))]),i("div",{staticClass:"error-modal-item-content"},["添加审核人"!=e.type?i("span",[t._v(" "+t._s(e.name)+"下存在未选择的"+t._s(e.type)+" ")]):i("span",[t._v(" "+t._s(e.name)+"未"+t._s(e.type))])])])})),0)])])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.tipVisible=!1}}},[t._v("确 定")])],1)])],1)}),a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"end-node"},[i("div",{staticClass:"end-node-circle"}),i("div",{staticClass:"end-node-text"},[t._v("流程结束")])])}],d=i("ade3"),l=i("bc3a"),c=i.n(l),p={name:"three_setting",props:{sumval:Object,departlist_str:String,mycode:String,worktype:Number,show_click:Number},data:function(){return{tipVisible:!1,alldepart:[],isTried:!0,tipList:[],nowVal:100,processConfig:{},nodeConfig:{},flowPermission:[],directorMaxLevel:0,dialogVisible:!0,tableId:"",depart_list_all:[],depart_list_children:[],node:{nodeName:"部门1",type:3,priorityLevel:1,conditionList:[{columnId:0,type:1}],nodeUserList:[],childNode:{nodeName:"路由",type:4,priorityLevel:1,conditionList:[],nodeUserList:[],conditionNodes:[{nodeName:"标签1(可改)",type:3,priorityLevel:1,conditionList:[{columnId:0,type:1}],nodeUserList:[{targetId:0,type:0}],childNode:{nodeName:"审核人",type:1,priorityLevel:1,conditionList:[],nodeUserList:[],childNode:null,conditionNodes:[],error:!0},conditionNodes:[],error:!1},{nodeName:"标签2(可改)",type:3,priorityLevel:2,conditionList:[],nodeUserList:[],childNode:{nodeName:"审核人",type:1,priorityLevel:1,conditionList:[],nodeUserList:[],childNode:null,conditionNodes:[],error:!0},conditionNodes:[],error:!1}]},conditionNodes:[],error:!1}}},watch:{departlist_str:function(t){var e=[],i=[],r=[];if(void 0!=this.sumval.firstval.departlist)for(var s in this.sumval.firstval.departlist)if(e.push({type:1==this.sumval.firstval.departlist[s].IsDepart?3:1,targetId:1==this.sumval.firstval.departlist[s].IsDepart?parseInt(this.sumval.firstval.departlist[s].id):this.sumval.firstval.departlist[s].id,name:this.sumval.firstval.departlist[s].depart_id,department:this.sumval.firstval.departlist[s].Department}),i.push({id:this.sumval.firstval.departlist[s].id,IsDepart:this.sumval.firstval.departlist[s].IsDepart,type:3,depart_id:this.sumval.firstval.departlist[s].depart_id,Department:this.sumval.firstval.departlist[s].Department}),this.sumval.firstval.departlist[s].IsDepart){1;var o=JSON.parse(JSON.stringify(this.node));o.nodeName=this.sumval.firstval.departlist[s].Department,o.nodeUserList=[{type:1==this.sumval.firstval.departlist[s].IsDepart?3:1,targetId:1==this.sumval.firstval.departlist[s].IsDepart?parseInt(this.sumval.firstval.departlist[s].id):this.sumval.firstval.departlist[s].id,name:this.sumval.firstval.departlist[s].depart_id,department:this.sumval.firstval.departlist[s].Department}],r.push(o)}this.sumval.threeval.nodeConfig.childNode.conditionNodes=r,this.nodeConfig=this.sumval.threeval.nodeConfig,this.nodeConfig.nodeUserList=e,this.sumval.threeval.flowPermission=e,this.flowPermission=this.sumval.threeval.flowPermission,this.$emit("update:sumval",this.sumval)}},mounted:function(){this.getalldepartmenttree(),this.gettemplateworkflow()},methods:(r={gettemplateworkflow:function(){var t=this,e=this,i=(this.$store.state.corpid,{corpid:this.$store.state.corpid,userid:this.$store.state.userid,WorkflowCode:"iyxLbcV3rHAaMmj4s8bbBr0OmXhyhbDm"}),r=e.$createObj(i),s=r["keyvalue"],o=e.$apilist["gettemplateworkflow"]+"?signature="+s;this.$server.post(o,r["fd"]).then((function(e){null==e.data.childNode&&null==e.data.conditionnodes?t.getalldepartment():(e.data["conditionList"]=[],t.nodeConfig=e.data,t.processConfig.nodeConfig=e.data,t.nodeConfig.nodeUserList=e.data.nodeUserList,t.flowPermission=e.data.nodeUserList)})).catch((function(t){}))},axiosMethod:function(){var t=this,e=this.$store.state.weburl;c.a.get(e+"/condition.json",{workFlowDefId:this.$route.params.workFlowDefId}).then((function(e){t.processConfig=e.data.data;var i=[],r=[],s=[];if(void 0==t.depart_list_children)return t.$alert("请先在基础设置中设置填报对象！","提示",{confirmButtonText:"确定"}),!1;for(var o in t.depart_list_children)if(i.push({type:1==t.depart_list_children[o].IsDepart?3:1,targetId:1==t.depart_list_children[o].IsDepart?parseInt(t.depart_list_children[o].id):t.depart_list_children[o].id,name:t.depart_list_children[o].depart_id,department:t.depart_list_children[o].Department}),r.push({id:t.depart_list_children[o].id,IsDepart:t.depart_list_children[o].IsDepart,type:3,depart_id:t.depart_list_children[o].depart_id,Department:t.depart_list_children[o].Department}),t.depart_list_children[o].IsDepart){parseInt(o);var n=JSON.parse(JSON.stringify(t.node));n.nodeName=t.depart_list_children[o].Department,n.nodeUserList=[{type:1==t.depart_list_children[o].IsDepart?3:1,targetId:1==t.depart_list_children[o].IsDepart?parseInt(t.depart_list_children[o].id):t.depart_list_children[o].id,name:t.depart_list_children[o].depart_id,department:t.depart_list_children[o].Department}],s.push(n)}t.processConfig.nodeConfig.childNode.conditionNodes=s,t.departlist=r,t.nodeConfig=t.processConfig.nodeConfig,t.nodeConfig.nodeUserList=[{type:1==t.depart_list_all[0].IsDepart?3:1,targetId:1==t.depart_list_all[0].IsDepart?parseInt(t.depart_list_all[0].id):t.depart_list_all[0].id,name:t.depart_list_all[0].depart_id,department:t.depart_list_all[0].Department}],t.processConfig.flowPermission=[{type:1==t.depart_list_all[0].IsDepart?3:1,targetId:1==t.depart_list_all[0].IsDepart?parseInt(t.depart_list_all[0].id):t.depart_list_all[0].id,name:t.depart_list_all[0].depart_id,department:t.depart_list_all[0].Department}],t.flowPermission=t.processConfig.flowPermission,t.directorMaxLevel=t.processConfig.directorMaxLevel,t.tableId=t.processConfig.tableId}))},getalldepartmenttree:function(){var t=this,e=(this.$store.state.corpid,{corpid:this.$store.state.corpid,userid:this.$store.state.userid}),i=t.$createObj(e),r=i["keyvalue"],s=t.$apilist["getalldepartmentanduser"]+"?signature="+r;this.$server.post(s,i["fd"]).then((function(e){t.loading=!1,t.alldepart=e.data})).catch((function(t){}))},getalldepartment:function(){var t=this,e=this,i=(this.$store.state.corpid,{corpid:this.$store.state.corpid,userid:this.$store.state.userid}),r=e.$createObj(i),s=r["keyvalue"],o=e.$apilist["getalldepartment"]+"?signature="+s;this.$server.post(o,r["fd"]).then((function(e){t.depart_list_all=e.data,t.depart_list_children=e.data[0].Children,t.processConfig=e.data,t.axiosMethod()})).catch((function(t){}))},toReturn:function(){},reErr:function(t){if(t.childNode){if(1==t.childNode.type)t.childNode.error&&this.tipList.push({name:t.childNode.nodeName,type:"审核人"}),this.reErr(t.childNode);else if(2==t.childNode.type)t.childNode.error&&this.tipList.push({name:t.childNode.nodeName,type:"抄送人"}),this.reErr(t.childNode);else if(3==t.childNode.type)this.reErr(t.childNode.childNode);else if(4==t.childNode.type){this.reErr(t.childNode);for(var e=0;e<t.childNode.conditionNodes.length;e++)t.childNode.conditionNodes[e].error&&this.tipList.push({name:t.childNode.conditionNodes[e].nodeName,type:"条件"}),this.reErr(t.childNode.conditionNodes[e])}}else t.childNode=null},saveSet:function(){this.isTried=!0,this.tipList=[],this.reErr(this.nodeConfig),0==this.tipList.length?this.processConfig.flowPermission=this.flowPermission:this.tipVisible=!0},zoomSize:function(t){if(1==t){if(50==this.nowVal)return;this.nowVal-=10}else{if(300==this.nowVal)return;this.nowVal+=10}},reload:function(){var t=this;this.$confirm(" 是否重置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getalldepartment(),t.$message({type:"info",message:"重置成功"})})).catch((function(){t.$message({type:"info",message:"已取消重置"})}))},submit:function(){var t=this;if(this.tipList=[],this.reErr(this.processConfig.nodeConfig),null==this.processConfig.nodeConfig.childNode&&0==this.tipList.length&&this.tipList.push({name:"审核人",type:"审核人"}),0==this.tipList.length){var e=this,i=(this.$store.state.corpid,{corpid:this.$store.state.corpid,userid:this.$store.state.userid,workflow_info:JSON.stringify(this.processConfig)}),r=e.$createObj(i),s=r["keyvalue"],o=e.$apilist["addtemplateworkflow"]+"?signature="+s;this.$server.post(o,r["fd"]).then((function(e){t.$message({type:"success",message:"保存成功！"})})).catch((function(t){}))}else this.tipVisible=!0}},Object(d["a"])(r,"reErr",(function(t){if(void 0==t)this.tipList.push({name:""});else if(t.childNode){if(1==t.childNode.type)t.childNode.error&&this.tipList.push({name:t.nodeName,type:"审核人"}),this.reErr(t.childNode);else if(2==t.childNode.type)t.childNode.error&&this.tipList.push({name:t.childNode.nodeName,type:"抄送人"}),this.reErr(t.childNode);else if(3==t.childNode.type)this.reErr(t.childNode.childNode);else if(4==t.childNode.type){this.reErr(t.childNode);for(var e=0;e<t.childNode.conditionNodes.length;e++)t.childNode.conditionNodes[e].error&&this.tipList.push({name:t.childNode.conditionNodes[e].nodeName,type:"条件"}),this.reErr(t.childNode.conditionNodes[e])}else if(5==t.childNode.type){this.reErr(t.childNode);for(e=0;e<t.childNode.conditionNodes.length;e++)this.reErrTwo(t.childNode.conditionNodes[e].childNode.conditionNodes),t.childNode.conditionNodes[e].error&&this.tipList.push({name:t.childNode.conditionNodes[e].nodeName,type:"条件"}),this.reErr(t.childNode.conditionNodes[e])}}else t.childNode=null})),Object(d["a"])(r,"reErrTwo",(function(t){for(var e in t)null==t[e].childNode&&this.tipList.push({name:t[e].nodeName,type:"添加审核人"})})),r)},f=p,u=(i("efb0"),i("2877")),h=Object(u["a"])(f,n,a,!1,null,null,null),m=h.exports,v={name:"threee_setting",props:{sumval:Object,departlist:String,key:Number,mycode:String},components:{Conditions:m},data:function(){return{show_num:3,is_nav:!0,myid:void 0,worktype:3,show_click:2}},methods:{switchClick:function(t){this.show_click=1,this.show_num=t},closeNavClick:function(){this.is_nav=!this.is_nav}},created:function(){},mounted:function(){},watch:{key:function(t){"123"!=this.mycode?(this.show_click=2,this.worktype=3,this.show_num=3):(this.show_click=1,0==this.show_num&&(this.show_num=1))},departlist:function(t){}}},_=v,g=(i("a2a7"),Object(u["a"])(_,s,o,!1,null,null,null));e["default"]=g.exports},"746f":function(t,e,i){var r=i("428f"),s=i("5135"),o=i("e538"),n=i("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});s(e,t)||n(e,t,{value:o.f(t)})}},a2a7:function(t,e,i){"use strict";i("0da8")},a4d3:function(t,e,i){"use strict";var r=i("23e7"),s=i("da84"),o=i("d066"),n=i("c430"),a=i("83ab"),d=i("4930"),l=i("fdbf"),c=i("d039"),p=i("5135"),f=i("e8b5"),u=i("861d"),h=i("825a"),m=i("7b0b"),v=i("fc6a"),_=i("c04e"),g=i("5c6c"),y=i("7c73"),b=i("df75"),N=i("241c"),w=i("057f"),C=i("7418"),L=i("06cf"),S=i("9bf2"),I=i("d1e7"),k=i("9112"),$=i("6eeb"),O=i("5692"),D=i("f772"),x=i("d012"),E=i("90e3"),P=i("b622"),j=i("e538"),V=i("746f"),T=i("d44e"),z=i("69f3"),U=i("b727").forEach,J=D("hidden"),M="Symbol",F="prototype",B=P("toPrimitive"),W=z.set,A=z.getterFor(M),H=Object[F],Q=s.Symbol,R=o("JSON","stringify"),X=L.f,q=S.f,G=w.f,K=I.f,Y=O("symbols"),Z=O("op-symbols"),tt=O("string-to-symbol-registry"),et=O("symbol-to-string-registry"),it=O("wks"),rt=s.QObject,st=!rt||!rt[F]||!rt[F].findChild,ot=a&&c((function(){return 7!=y(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,i){var r=X(H,e);r&&delete H[e],q(t,e,i),r&&t!==H&&q(H,e,r)}:q,nt=function(t,e){var i=Y[t]=y(Q[F]);return W(i,{type:M,tag:t,description:e}),a||(i.description=e),i},at=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Q},dt=function(t,e,i){t===H&&dt(Z,e,i),h(t);var r=_(e,!0);return h(i),p(Y,r)?(i.enumerable?(p(t,J)&&t[J][r]&&(t[J][r]=!1),i=y(i,{enumerable:g(0,!1)})):(p(t,J)||q(t,J,g(1,{})),t[J][r]=!0),ot(t,r,i)):q(t,r,i)},lt=function(t,e){h(t);var i=v(e),r=b(i).concat(ht(i));return U(r,(function(e){a&&!pt.call(i,e)||dt(t,e,i[e])})),t},ct=function(t,e){return void 0===e?y(t):lt(y(t),e)},pt=function(t){var e=_(t,!0),i=K.call(this,e);return!(this===H&&p(Y,e)&&!p(Z,e))&&(!(i||!p(this,e)||!p(Y,e)||p(this,J)&&this[J][e])||i)},ft=function(t,e){var i=v(t),r=_(e,!0);if(i!==H||!p(Y,r)||p(Z,r)){var s=X(i,r);return!s||!p(Y,r)||p(i,J)&&i[J][r]||(s.enumerable=!0),s}},ut=function(t){var e=G(v(t)),i=[];return U(e,(function(t){p(Y,t)||p(x,t)||i.push(t)})),i},ht=function(t){var e=t===H,i=G(e?Z:v(t)),r=[];return U(i,(function(t){!p(Y,t)||e&&!p(H,t)||r.push(Y[t])})),r};if(d||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=E(t),i=function(t){this===H&&i.call(Z,t),p(this,J)&&p(this[J],e)&&(this[J][e]=!1),ot(this,e,g(1,t))};return a&&st&&ot(H,e,{configurable:!0,set:i}),nt(e,t)},$(Q[F],"toString",(function(){return A(this).tag})),$(Q,"withoutSetter",(function(t){return nt(E(t),t)})),I.f=pt,S.f=dt,L.f=ft,N.f=w.f=ut,C.f=ht,j.f=function(t){return nt(P(t),t)},a&&(q(Q[F],"description",{configurable:!0,get:function(){return A(this).description}}),n||$(H,"propertyIsEnumerable",pt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Q}),U(b(it),(function(t){V(t)})),r({target:M,stat:!0,forced:!d},{for:function(t){var e=String(t);if(p(tt,e))return tt[e];var i=Q(e);return tt[e]=i,et[i]=e,i},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(p(et,t))return et[t]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!a},{create:ct,defineProperty:dt,defineProperties:lt,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:ut,getOwnPropertySymbols:ht}),r({target:"Object",stat:!0,forced:c((function(){C.f(1)}))},{getOwnPropertySymbols:function(t){return C.f(m(t))}}),R){var mt=!d||c((function(){var t=Q();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}));r({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,i){var r,s=[t],o=1;while(arguments.length>o)s.push(arguments[o++]);if(r=e,(u(e)||void 0!==t)&&!at(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),s[1]=e,R.apply(null,s)}})}Q[F][B]||k(Q[F],B,Q[F].valueOf),T(Q,M),x[J]=!0},d28b:function(t,e,i){var r=i("746f");r("iterator")},e01a:function(t,e,i){"use strict";var r=i("23e7"),s=i("83ab"),o=i("da84"),n=i("5135"),a=i("861d"),d=i("9bf2").f,l=i("e893"),c=o.Symbol;if(s&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var p={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new c(t):void 0===t?c():c(t);return""===t&&(p[e]=!0),e};l(f,c);var u=f.prototype=c.prototype;u.constructor=f;var h=u.toString,m="Symbol(test)"==String(c("test")),v=/^Symbol\((.*)\)[^)]+$/;d(u,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=h.call(t);if(n(p,t))return"";var i=m?e.slice(7,-1):e.replace(v,"$1");return""===i?void 0:i}}),r({global:!0,forced:!0},{Symbol:f})}},e538:function(t,e,i){var r=i("b622");e.f=r},efb0:function(t,e,i){"use strict";i("39da")}}]);