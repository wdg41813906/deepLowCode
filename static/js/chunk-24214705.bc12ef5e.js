(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24214705"],{"0143":function(t,e,a){"use strict";a("0cdb")},"0cdb":function(t,e,a){},"184a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task_alert"},[a("el-dialog",{attrs:{title:"新建任务",visible:t.my_is_add,width:"600px","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.my_is_add=e}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名",prop:"title"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"时间",prop:"dateval"}},[a("div",{staticClass:"el-input"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.ruleForm.dateval,callback:function(e){t.$set(t.ruleForm,"dateval",e)},expression:"ruleForm.dateval"}})],1)]),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subClick("ruleForm")}}},[t._v("确 定")])],1)])],1)},l=[],i={name:"new_task_alert",props:{is_add:Boolean},data:function(){var t=function(t,e,a){if(0==e.length)return a(new Error("请选择日期"));a()};return{termlist:[],my_is_add:!1,ruleForm:{title:"",remark:"",term:"1",dateval:[]},rules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],dateval:[{validator:t,trigger:"blur"}]}}},mounted:function(){this.getterm()},methods:{back:function(){this.my_is_add=!1},getterm:function(){var t=this,e={userid:this.$store.state.userid,corpid:this.$store.state.corpid},a=this.$createObj(e),s=a["keyvalue"],l=this.$apilist["term"]+"?signature="+s;this.$server.post(l,a["fd"]).then((function(e){t.termlist=e.data.reverse()}))},subClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a={userid:e.$store.state.userid,corpid:e.$store.state.corpid,title:e.ruleForm.title,remark:e.ruleForm.remark,term:e.ruleForm.term,start_date:e.ruleForm.dateval[0],end_date:e.ruleForm.dateval[1]},s=e.$createObj(a),l=s["keyvalue"],i=e.$apilist["addonetask"]+"?signature="+l;e.$server.post(i,s["fd"]).then((function(t){e.$message({message:"添加成功！",type:"success"}),e.back(),e.ruleForm={title:"",remark:"",term:"1",dateval:[]},e.$emit("sub")}))}))}},watch:{is_add:function(t){this.my_is_add=t},my_is_add:function(t){this.$emit("back",t)}}},r=i,o=(a("b06a"),a("2877")),n=Object(o["a"])(r,s,l,!1,null,null,null);e["a"]=n.exports},"4d82":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.is_public?a("div",{staticClass:"public_alert"},[a("el-dialog",{attrs:{title:"公示",visible:t.is_public,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.is_public=e}}},[a("el-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"任务名"}},[a("label",{attrs:{for:""}},[t._v(t._s(t.detail.Title))])]),a("el-form-item",{attrs:{label:"公示状态"}},[a("el-radio",{attrs:{label:!0},model:{value:t.detail.IsPub,callback:function(e){t.$set(t.detail,"IsPub",e)},expression:"detail.IsPub"}},[t._v("开始")]),a("el-radio",{attrs:{label:!1},model:{value:t.detail.IsPub,callback:function(e){t.$set(t.detail,"IsPub",e)},expression:"detail.IsPub"}},[t._v("结束")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updatepubinfo()}}},[t._v("确 认")])],1)],1),a("DepartAlertP",{attrs:{is_add:t.is_depart_p,departlist:t.publiclist,title:"公示部门"},on:{back:t.departPBack,departSub:t.departPSub}})],1):t._e()},l=[],i=a("361f"),r={name:"public_alert",props:{is_add:!1,detail:Object},components:{DepartAlertP:i["a"]},data:function(){return{is_public:!1,is_depart_p:!1,publiclist:[],radio:0,date_time:[],remark:""}},methods:{departPSub:function(t){for(var e in this.publiclist=t,t)delete this.publiclist[e].Children,delete this.publiclist[e].ParentId},departPClick:function(){this.is_depart_p=!this.is_depart_p},departPBack:function(t){this.is_depart_p=t},getpubinfo:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:this.detail.Code},s=e.$createObj(a),l=s["keyvalue"],i=e.$apilist["getpubinfo"]+"?signature="+l;e.$server.post(i,s["fd"]).then((function(e){null!=e.data.PubScope?t.publiclist=e.data.PubScopeInfo:t.publiclist=[],t.radio=e.data.State,""==e.data.StartDate||""==e.data.StartDate?t.date_time=[]:t.date_time=[1e3*e.data.StartDate,1e3*e.data.EndDate]})).catch((function(t){}))},updatepubinfo:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:this.detail.Code,state:this.radio},s=e.$createObj(a),l=s["keyvalue"],i=e.$apilist["pubtask"]+"?signature="+l;e.$server.post(i,s["fd"]).then((function(e){t.$message({message:"操作成功！",type:"success"}),t.is_public=!1,t.$emit("sub")})).catch((function(t){}))}},watch:{is_add:function(t){t&&(1==this.detail.IsPub?this.radio=1:this.radio=0,this.is_public=t)},is_public:function(t){this.$emit("back",t),this.radio=0}}},o=r,n=(a("0143"),a("2877")),u=Object(n["a"])(o,s,l,!1,null,null,null);e["a"]=u.exports},7306:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task_list"},[a("div",{staticClass:"text_right top_form"},[a("el-select",{on:{change:function(e){return t.hangdleSelection()}},model:{value:t.state_val,callback:function(e){t.state_val=e},expression:"state_val"}},t._l(t.selectlist,(function(t){return a("el-option",{key:t,attrs:{label:t.label,value:t.val}})})),1)],1),a("div",[a("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tasklist,"pagination-props":{pageSizes:[5,10,15]},"row-key":t.row_key,"expand-row-keys":t.expandRowKeys,"table-props":t.tableProps},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"任务名",prop:"Title"}}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(+new Date(new Date(e.row.StartDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+"至"+t._s(new Date(+new Date(new Date(e.row.EndDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0]))]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"Remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.Remark?a("span",[t._v("无")]):a("p",{staticClass:"p_over_2",attrs:{title:e.row.Remark}},[t._v(" "+t._s(e.row.Remark)+" ")])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flow-permisson-row"},[a("span",[0==e.row.State?a("span",{staticClass:"success flow_per"},[t._v("进行中")]):t._e(),1==e.row.State?a("span",{staticClass:"flow_per warning"},[t._v("未开始")]):t._e(),2==e.row.State?a("span",{staticClass:"flow_per danger"},[t._v("结束")]):t._e()])])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.goTaskGClick(e.row)}}},[t._v("数据")])]}}])})],1)],1),a("PublicAlert",{attrs:{is_add:t.is_public,detail:t.public_detail},on:{back:t.publickBack,sub:t.publicSub}})],1)},l=[],i=a("184a"),r=a("f3a9"),o=a("4d82"),n=a("5a6e"),u={name:"task_list",components:{NewTaskAlert:i["a"],EditorTaskAlert:r["a"],PublicAlert:o["a"]},data:function(){return{selectlist:[{label:"未开始",val:1},{label:"进行中",val:0},{label:"已结束",val:2}],ruleForm:{other:""},rules:{other:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},is_flag:!1,dialogVisible:!1,tasklist:[],is_add:!1,is_editor:!1,detail:{},del_detail:{},is_public:!1,state_val:0}},methods:{hangdleSelection:function(){this.alltasklist(this.state_val)},goTaskGClick:function(t){this.$router.push({name:"alldataATask",query:{id:Object(n["b"])(t.Code),name:t.Title}})},publicClick:function(t){this.is_public=!0,this.public_detail=t},publickBack:function(t){this.is_public=t},publicSub:function(){this.alltasklist()},switchClick:function(t){var e=this,a=this,s={task_code:t.Code,corpid:this.$store.state.corpid,userid:this.$store.state.userid};0==t.State?s["state"]=2:s["state"]=0;var l=a.$createObj(s),i=l["keyvalue"],r=a.$apilist["switchtaskstate"]+"?signature="+i;a.$server.post(r,l["fd"]).then((function(t){e.$message({type:"success",message:"操作成功!"}),e.alltasklist()})).catch((function(t){}))},alltasklist:function(t){var e=this,a=this,s={corpid:this.$store.state.corpid,userid:this.$store.state.userid,state:t},l=a.$createObj(s),i=l["keyvalue"],r=a.$apilist["allauthorizetask"]+"?signature="+i;this.$server.post(r,l["fd"]).then((function(t){e.tasklist=t.data})).catch((function(t){}))}},mounted:function(){this.alltasklist(this.state_val)}},c=u,d=a("2877"),p=Object(d["a"])(c,s,l,!1,null,null,null);e["default"]=p.exports},"78df":function(t,e,a){"use strict";a("9453")},9453:function(t,e,a){},a229:function(t,e,a){},b06a:function(t,e,a){"use strict";a("a229")},f3a9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task_alert"},[a("el-dialog",{attrs:{title:"编辑任务",visible:t.my_is_add,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.my_is_add=e}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名",prop:"title"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"时间",prop:"dateval"}},[a("div",{staticClass:"el-input"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.ruleForm.dateval,callback:function(e){t.$set(t.ruleForm,"dateval",e)},expression:"ruleForm.dateval"}})],1)]),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subClick("ruleForm")}}},[t._v("保 存")])],1)])],1)},l=[],i={name:"new_task_alert",props:{is_add:Boolean,detail:Object},data:function(){var t=function(t,e,a){if(0==e.length)return a(new Error("请选择日期"));a()};return{my_is_add:!1,ruleForm:{title:"",remark:"",dateval:[]},rules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],dateval:[{validator:t,trigger:"blur"}]}}},methods:{back:function(){this.my_is_add=!1},subClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a={userid:e.$store.state.userid,corpid:e.$store.state.corpid,title:e.ruleForm.title,remark:e.ruleForm.remark,start_date:e.ruleForm.dateval[0],end_date:e.ruleForm.dateval[1],task_code:e.detail.Code},s=e.$createObj(a),l=s["keyvalue"],i=e.$apilist["editonetask"]+"?signature="+l;e.$server.post(i,s["fd"]).then((function(t){e.$message({message:"编辑成功！",type:"success"}),e.back(),e.$emit("sub")}))}))}},watch:{is_add:function(t){this.my_is_add=t,t&&(this.ruleForm={title:this.detail.Title,remark:this.detail.Remark,dateval:[this.detail.StartDate,this.detail.EndDate]})},my_is_add:function(t){this.$emit("back",t)}}},r=i,o=(a("78df"),a("2877")),n=Object(o["a"])(r,s,l,!1,null,null,null);e["a"]=n.exports}}]);