(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f538df82"],{"3ec3":function(e,i,t){"use strict";var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"log_detail"},[t("el-dialog",{attrs:{title:"日志",visible:e.my_is_add,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(i){e.my_is_add=i}}},[t("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.loglist,"pagination-props":{pageSizes:[5,10,15]},"row-key":e.row_key,"expand-row-keys":e.expandRowKeys,"table-props":e.tableProps}},[t("el-table-column",{attrs:{label:"操作人"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(" "+e._s(i.row.UserName)+" /"+e._s(i.row.UserId)+" ")]}}])}),t("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(" "+e._s(new Date(+new Date(new Date(i.row.CreateTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[7==i.row.TypeId?t("p",{staticClass:"danger_span"},[e._v(" #"+e._s(i.row.TypeDesc)+"# ")]):t("p",{staticClass:"success_span"},[e._v("#"+e._s(i.row.TypeDesc)+"#")]),t("p",[e._v(e._s(i.row.Remark))])]}}])})],1)],1)],1)},a=[],l={name:"log_detail",props:{is_add:Boolean,code:String},components:{},data:function(){return{my_is_add:!1,loglist:[],loading:!1,tableProps:{border:!0,"header-cell-style":{background:"#eef1f6",color:"#606266"}}}},methods:{getallloginfobydatacode:function(){var e=this,i=this,t={corpid:this.$store.state.corpid,userid:this.$store.state.userid,data_code:this.code},s=i.$createObj(t),a=s["keyvalue"],l=i.$apilist["getallloginfobydatacode"]+"?signature="+a;i.$server.post(l,s["fd"]).then((function(i){e.loglist=i.data})).catch((function(e){}))}},watch:{is_add:function(e){this.my_is_add=e,e&&this.getallloginfobydatacode()},my_is_add:function(e){this.$emit("back",e)}}},o=l,r=(t("e34d"),t("2877")),n=Object(r["a"])(o,s,a,!1,null,null,null);i["a"]=n.exports},"498a":function(e,i,t){"use strict";var s=t("23e7"),a=t("58a8").trim,l=t("c8d2");s({target:"String",proto:!0,forced:l("trim")},{trim:function(){return a(this)}})},"5bad":function(e,i,t){},"690f":function(e,i,t){"use strict";var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"fill_alert"},[t("el-dialog",{staticClass:"fill_alert_dialog",attrs:{title:"编辑",visible:e.my_is_add,"close-on-click-modal":!1,"custom-class":"depart_aldert_dialog",width:"600px",height:"700px","append-to-body":!0},on:{"update:visible":function(i){e.my_is_add=i},close:e.close}},[t("div",{},[t("el-form",{attrs:{"label-position":"left","label-width":e.form_data.labelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"表单"}},[e._v(e._s(e.form_data.title)+" "+e._s(e.form_data.labelPosition))])],1),t("el-form",{staticClass:"add_form",attrs:{"label-width":e.form_data.labelWidth+"px","label-position":"top"}},[""!=e.form_data.remark?t("el-form-item",{staticClass:"remark_style"},[e._v(" "+e._s(e.form_data.remark)+" ")]):e._e(),e._l(e.other_data.FField,(function(i,s){return t("div",{key:i},["divider"==i.tagIcon||"describe"==i.tagIcon||"describeImg"==i.tagIcon?t("el-form-item",["divider"==i.tagIcon?t("div",[t("el-divider")],1):"describe"==i.tagIcon?t("div",[t("el-tag",[e._v(e._s(i.placeholder))])],1):t("div",[t("el-image",{attrs:{src:i.placeholder}})],1)]):"calculate"==i.tagIcon?t("el-form-item",{attrs:{"label-width":i.labelWidth>0?i.labelWidth+"px":e.form_data.labelWidth+"px",label:i.label,"label-position":e.form_data.labelPosition}},[t("span",{staticClass:"calculate_span display_inline_block"},[e._v(" "+e._s(null==i.value?0:i.value)+" ")]),i.enable_assign?t("el-button",{staticClass:"margin_l_15",attrs:{size:"medium",type:"text"},on:{click:function(t){return e.assignClick(i,s)}}},[e._v("分配")]):e._e(),null!=i.assign_data?t("div",[null!=i.assign_data&&0!=i.assign_data.length?t("span",{staticClass:"success"},[e._v(" 未分配值："+e._s(e.calOther(i.value,s,i.assign_data))+" ")]):e._e(),e._l(i.assign_data,(function(a,l){return t("div",{key:a,staticClass:"margin_top_10"},[t("el-select",{staticClass:"assign_input",attrs:{filterable:"",placeholder:"请选择被分配人","filter-method":e.dataFilter},on:{change:function(i){return e.assignChange()}},model:{value:a.ToUserId,callback:function(i){e.$set(a,"ToUserId",i)},expression:"assignitem.ToUserId"}},e._l(e.userlist,(function(i){return t("el-option",{key:i.uid,attrs:{label:i.name,value:i.uid}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(i.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(i.uid))])])})),1),t("el-input",{staticClass:"assign_input margin_l_15",attrs:{placeholder:"请填写分配数值"},on:{input:function(t){return e.cal(i.value,i.assign_data,s)}},model:{value:a.ToValue,callback:function(i){e.$set(a,"ToValue",i)},expression:"assignitem.ToValue"}}),t("i",{staticClass:"el-icon-remove assign_icon assign_error danger",on:{click:function(t){return e.removeassign(i,l)}}}),l===i.assign_data.length-1?t("i",{staticClass:"el-icon-circle-plus assign_icon assign_add primary",on:{click:function(t){return e.assignClick(i,s)}}}):e._e()],1)}))],2):e._e()],1):"upload"==i.tagIcon?t("el-form-item",{attrs:{"label-width":i.labelWidth>0?i.labelWidth+"px":e.form_data.labelWidth+"px",label:i.label,"label-position":e.form_data.labelPosition,required:i.required}},[t("uploadFile",{attrs:{item:i,fileList:i.value},on:{back_btn:e.back_btn}})],1):"image"==i.tagIcon?t("el-form-item",{attrs:{"label-width":i.labelWidth>0?i.labelWidth+"px":e.form_data.labelWidth+"px",label:i.label,"label-position":e.form_data.labelPosition,required:i.required}},[t("uploadImg",{attrs:{item:i,imgList:i.value},on:{back_btn:e.back_btn}})],1):"calculate"!=i.tagIcon?t("el-form-item",{attrs:{"label-width":i.labelWidth>0?i.labelWidth+"px":e.form_data.labelWidth+"px",label:i.label,"label-position":e.form_data.labelPosition,required:i.required}},["input"==i.tagIcon?t("div",[t("el-input",{attrs:{placeholder:i.placeholder,maxlength:i.maxlength,size:"medium"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}})],1):e._e(),"textarea"==i.tagIcon?t("div",[t("el-input",{attrs:{type:"textarea",rows:3,maxlength:i.maxlength,placeholder:i.placeholder},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}})],1):e._e(),"number"==i.tagIcon?t("div",[t("el-input",{attrs:{placeholder:i.placeholder,size:"medium"},on:{input:function(i){return e.enterClick(i)}},model:{value:i.value,callback:function(t){e.$set(i,"value","string"===typeof t?t.trim():t)},expression:"item.value"}}),i.enable_assign?t("el-button",{staticClass:"margin_l_15",attrs:{size:"medium",type:"text"},on:{click:function(t){return e.assignClick(i,s)}}},[e._v("分配")]):e._e(),null!=i.assign_data?t("div",[null!=i.assign_data&&0!=i.assign_data.length?t("span",{staticClass:"success"},[e._v(" 未分配值："+e._s(e.calOtherNum(i.value,s,i.assign_data))+" ")]):e._e(),e._l(i.assign_data,(function(a,l){return t("div",{key:a,staticClass:"margin_top_10"},[t("el-select",{staticClass:"assign_input",attrs:{filterable:"",placeholder:"请选择被分配人","filter-method":e.dataFilter},on:{change:function(i){return e.assignChange()}},model:{value:a.ToUserId,callback:function(i){e.$set(a,"ToUserId",i)},expression:"assignitem.ToUserId"}},e._l(e.userlist,(function(i){return t("el-option",{key:i.uid,attrs:{label:i.name,value:i.uid}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(i.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(i.uid))])])})),1),t("el-input",{staticClass:"assign_input margin_l_15",attrs:{placeholder:"请填写分配数值"},on:{input:function(t){return e.cal(i.value,i.assign_data,s)}},model:{value:a.ToValue,callback:function(i){e.$set(a,"ToValue",i)},expression:"assignitem.ToValue"}}),t("i",{staticClass:"el-icon-remove assign_icon assign_error danger",on:{click:function(t){return e.removeassign(i,l)}}}),l===i.assign_data.length-1?t("i",{staticClass:"el-icon-circle-plus assign_icon assign_add primary",on:{click:function(t){return e.assignClick(i,s)}}}):e._e()],1)}))],2):e._e()],1):e._e(),"date"==i.tagIcon?t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:i.placeholder,size:"medium"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}})],1):e._e(),"select"==i.tagIcon?t("div",[t("el-select",{attrs:{placeholder:i.placeholder,size:"medium"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}},e._l(i.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"select_number"==i.tagIcon?t("div",[0==i.is_counted?t("span",[e._v(e._s(e.otherfn(i)))]):e._e(),t("el-select",{attrs:{placeholder:i.placeholder,size:"medium"},on:{change:function(i){return e.selectNChage(i)}},model:{value:i.is_counted,callback:function(t){e.$set(i,"is_counted",t)},expression:"item.is_counted"}},e._l(i.options,(function(e){return t("el-option",{key:e.value+"__"+e.label,attrs:{label:e.label,value:e.value+"__"+e.label}})})),1)],1):e._e(),"rate"==i.tagIcon?t("div",[t("el-rate",{attrs:{"allow-half":i["allow-half"]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}})],1):e._e()]):e._e()],1)}))],2)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(i){return e.close()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.submitClick()}}},[e._v("确 定")])],1)])],1)},a=[],l=(t("4de4"),t("c975"),t("b0c0"),t("b680"),t("d3b7"),t("ac1f"),t("25f0"),t("1276"),t("53ca"),t("5a6e")),o=t("1d57"),r=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-upload",{staticClass:"upload-pic",attrs:{action:"",data:e.QiniuData,"on-remove":function(i,t){return e.handleRemove(i,t,e.item)},"on-error":e.uploadError,"on-success":function(i,t,s){return e.uploadSuccess(i,t,s,e.item)},"before-remove":function(i,t){return e.beforeRemove(i,t,e.item)},"before-upload":e.beforeAvatarUpload,"http-request":function(i,t,s){return e.Upload(i,t,s)},"list-type":"picture-card",multiple:"","file-list":e.imgList}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("p",{staticClass:"upload_p"},[e._v(e._s(e.item.placeholder))])])])],1)},n=[],d=(t("99af"),t("a15b"),t("b64b"),t("0a52")),f={name:"upload_img",props:{item:Object,imgList:Array},data:function(){return{loading:!1,imgurl:this.$store.state.imgurl,uploadKey:"0pc99vFCTZFb-FxnwxuyzbVcmlC_n0qkQ37INru4",uploadToken:"gbNuDHhFDyjIRLDXdJ6HRzp-uc_D6QypslKMJ85m",baseUrl:"http://images.xxxx.cn/",QiniuData:{key:"",token:""},domain:"https://upload-z1.qiniup.com",qiniuaddr:"http://cdn.deepgrid.cn/",uploadPicUrl:"",fileList:[],nowTime:"",fileExtension:"",otherlist:[],newFile:"",is_error:!1}},methods:{beforeAvatarUpload:function(e){var i="image/png"===e.type,t="image/jpeg"===e.type,s="image/jpg"===e.type;if(!i&&!t&&!s)return this.$message.error("上传图片只能是 jpg、png、jpeg 格式!"),!1;var a=e.name.split(".");this.fileExtension=a.pop(),this.newFile=e,this.loading=!0},Upload:function(e,i,t){var s=this,a={userid:s.$store.state.userid,file:this.newFile};s.$createObj(a),s.$apilist["uploadfiles"];this.loading=!0,Object(d["a"])(this.newFile,{quality:.9},(function(e){var t={userid:s.$store.state.userid,basestr:String(e).split("base64,")[1],shotname:s.newFile.name},a=s.$createObj(t),l=s.$apilist["uploadimages"];s.$emit("back_btn",!0),s.$server.post(l,a["fd"]).then((function(e){setTimeout((function(){s.uploadPicUrl=e.urlpath,s.otherlist=i,s.imgList.push({name:e.docname,url:s.imgurl+e.urlpath,doccode:e.doccode}),s.item.value=s.imgList,s.loading=!1,s.$emit("back_btn",!1),s.$message.success("添加成功"),s.$emit("updata:item",this.item)}),1e3)})).catch((function(e){s.$message.error("上传失败"),s.loading=!1,s.$emit("back_btn",!1)}))}))},getval:function(e){var i=[];for(var t in e)-1!=Object.keys(e[t]).join(",").indexOf("response")&&i.push({name:e[t].response.key,hash:e[t].response.hash,url:e[t].url});return i},uploadSuccess:function(e,i,t,s){var a=this;this.uploadPicUrl="".concat(this.qiniuaddr,"/").concat(e.key);var l=this,o={key:e.key},r=l.$createObj(o),n=r["keyvalue"],d=l.$apilist["qiniudown"]+"?signature="+n;l.$server.post(d,r["fd"]).then((function(i){a.uploadPicUrl=i.data,a.imgList.push({name:e.key.split("__"+a.$store.state.corpid)[0]+"."+e.key.split(".").pop(),key:e.key,hash:e.hash,url:i.data}),s.value=a.imgList})).catch((function(e){}))},uploadError:function(e,i,t){this.$message({message:"上传出错，请重试！",type:"error",center:!0})},handleRemove:function(e,i,t){this.imgList=i,t.value=i,this.$emit("updata:item",t)},beforeRemove:function(e,i,t){}},created:function(){var e;this.nowTime=Object(l["e"])();var i={},t="deepgrid",s=this.uploadToken,a=this.uploadKey,r=Math.round((new Date).getTime()/1e3)+3600;i.scope=t,i.deadline=r,e=Object(o["a"])(s,a,i),this.QiniuData.token=e}},_=f,u=t("2877"),c=Object(u["a"])(_,r,n,!1,null,null,null),h=c.exports,m=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"upload_file"},[t("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"upload-demo",attrs:{action:"",data:e.QiniuData,"on-remove":function(i,t){return e.handleRemoveFile(i,t,e.item)},"on-error":e.uploadErrorFile,"on-success":function(i,t,s){return e.uploadSuccessFile(i,t,s,e.item)},"before-remove":function(i,t){return e.beforeRemoveFile(i,t,e.item)},"before-upload":e.beforeAvatarUploadFile,"http-request":function(i,t,s){return e.Upload(i,t,s)},multiple:"","file-list":e.fileList}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传附件")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("p",{staticClass:"upload_p"},[e._v("只能上传不超过20MB的文件")]),t("p",{staticClass:"upload_p"},[e._v(e._s(e.item.placeholder))])])],1),t("div",{staticStyle:{display:"none"}},[e._v(e._s(e.fileList))])],1)},g=[],p={name:"upload_file",props:{fileList:Object,item:Object},data:function(){return{loading:!1,imgurl:this.$store.state.imgurl,uploadKey:"0pc99vFCTZFb-FxnwxuyzbVcmlC_n0qkQ37INru4",uploadToken:"gbNuDHhFDyjIRLDXdJ6HRzp-uc_D6QypslKMJ85m",baseUrl:"http://images.xxxx.cn/",QiniuData:{key:"",token:""},domain:"https://upload-z1.qiniup.com",qiniuaddr:"http://cdn.deepgrid.cn/",uploadPicUrl:"",imgList:[],nowTime:"",fileExtension:"",otherlist:[],newFile:{},is_error:!1}},methods:{getval:function(e){var i=[];for(var t in e)-1!=Object.keys(e[t]).join(",").indexOf("response")&&i.push({name:e[t].response.key,hash:e[t].response.hash,url:e[t].url});return i},beforeAvatarUploadFile:function(e){var i=e.name.split(".");this.fileExtension=i.pop(),this.newFile=e,this.loading=!0},Upload:function(e,i,t){var s=this,a={userid:s.$store.state.userid,file:this.newFile},l=s.$createObj(a),o=s.$apilist["uploadfiles"];this.loading=!0,s.$emit("back_btn",!0),s.$server.post(o,l["fd"]).then((function(e){setTimeout((function(){s.uploadPicUrl=e.urlpath,s.otherlist=i,s.fileList.push({name:e.docname,url:s.imgurl+e.urlpath,doccode:e.doccode}),s.item.value=s.fileList,s.loading=!1,s.$emit("back_btn",!1),s.$message.success("添加成功"),s.$emit("updata:item",s.item)}),1e3)})).catch((function(e){s.loading=!1,s.$emit("back_btn",!1),s.$message.error("上传失败")}))},uploadSuccessFile:function(e,i,t,s){return!1},uploadSuccessFile1:function(e,i,t,s){var a=this,l={userid:a.$store.state.userid,file:i},o=a.$createObj(l),r=a.$apilist["uploadfiles"];this.loading=!0,a.$server.post(r,o["fd"]).then((function(e){a.loading=!1;var i=e;setTimeout((function(){a.excellist=i}),1e3)}))},isFileType:function(e){var i=(e[0].size/1048576).toFixed(2),t=e[0].name;return/.(xls|xlsx)$/.test(t)?i>20?(this.$alert("文件过大,请压缩至20M以内再上传!","提示",{confirmButtonText:"确定"}),!1):void 0:(this.$alert("请上传excel文件!","提示",{confirmButtonText:"确定"}),!1)},uploadErrorFile:function(e,i,t){this.$message({message:"上传出错，请重试！",type:"error",center:!0})},handleRemoveFile:function(e,i,t){this.fileList=i,t.value=i,this.$emit("updata:item",t)},beforeRemoveFile:function(e,i,t){}},created:function(){var e;this.nowTime=Object(l["e"])();var i={},t="deepgrid",s=this.uploadToken,a=this.uploadKey,r=Math.round((new Date).getTime()/1e3)+3600;i.scope=t,i.deadline=r,e=Object(o["a"])(s,a,i),this.QiniuData.token=e}},b=p,v=Object(u["a"])(b,m,g,!1,null,null,null),$=v.exports,k={name:"fill_alert",props:{is_add:Boolean,form_data:Object,task_code:String,main_code:String,detail:Object},components:{uploadImg:h,uploadFile:$},data:function(){return{other_data:{},my_is_add:!1,form_fields:[],assigndetail:{},is_assign:!1,userlist:[],userlist_two:[],assign_other:[],btn_disable:!1}},methods:{back_btn:function(e){this.btn_disable=e},addindex:function(e,i){this.assign_other[e]=i},calOther:function(e,i,t){for(var s in this.assign_other[i]=e,t){if("."==t[s].ToValue.toString().split("")[t[s].ToValue.length-1]||""==t[s].ToValue)break;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(t[s].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;e=this.subtr(e,parseFloat(t[s].ToValue))}return this.assign_other[i]=e,e},calOtherNum:function(e,i,t){for(var s in this.assign_other[i]=e,t){if("number"!=typeof t[s].ToValue&&("."==t[s].ToValue.split("")[t[s].ToValue.length-1]||""==t[s].ToValue))break;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(t[s].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;e=this.subtr(e,parseFloat(t[s].ToValue))}return this.assign_other[i]=e,e},cal:function(e,i,t){var s=parseFloat(e);for(var a in i){if("."==i[a].ToValue.split("")[i[a].ToValue.length-1]||""==i[a].ToValue)break;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(i[a].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;s=this.subtr(s,parseFloat(i[a].ToValue))}this.assign_other[t]=s},subtr:function(e,i){var t,s,a,l;try{t=e.toString().split(".")[1].length}catch(o){t=0}try{s=i.toString().split(".")[1].length}catch(o){s=0}return a=Math.pow(10,Math.max(t,s)),l=t>=s?t:s,((e*a-i*a)/a).toFixed(l)},getnowdate:function(e){var i=new Date(e),t=i.getFullYear(),s=i.getMonth()+1,a=i.getDate();return s<10&&(s="0"+s),a<10&&(a="0"+a),t+"/"+s+"/"+a},isNum:function(e){if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(e))return this.$alert(" 请填写数字!","提示",{confirmButtonText:"确定"}),e="",!1},removeassign:function(e,i){this.$delete(e.assign_data,i)},addassign:function(e){},assignClick:function(e,i){if(null==e.value||0==e.value)return this.$alert(" 请先填写，再分配!","提示",{confirmButtonText:"确定"}),!1;this.assignChange(),null==e.assign_data?(e.assign_data=[],e["assign_data"].push({ToUserId:"",ToValue:""})):e["assign_data"].push({ToUserId:"",ToValue:""})},otherfn:function(e){return e.is_counted="",""},close:function(){this.my_is_add=!1},selectNChage:function(e){this.subClick()},enterClick:function(e){return"."!=e.split("")[e.length-1]&&""!=e&&(/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(e)?void this.subClick():(this.$alert(" 请填写数字!","提示",{confirmButtonText:"确定"}),!1))},subClick:function(){var e=this,i=[];for(var t in this.form_fields)if(this.form_fields[t].required)if("number"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)});else{if("divider"==this.form_fields[t].tagIcon||"describe"==this.form_fields[t].tagIcon||"describeImg"==this.form_fields[t].tagIcon)continue;"select_number"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:this.form_fields[t].is_counted,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:!1,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].is_counted.split("__")[0])}):"image"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:"image",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:!1,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value}):"upload"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:"file",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value}):"date"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.getnowdate(this.form_fields[t].value)}):i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value})}else if("number"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)});else{if("divider"==this.form_fields[t].tagIcon||"describe"==this.form_fields[t].tagIcon||"describeImg"==this.form_fields[t].tagIcon)continue;if("select_number"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:this.form_fields[t].is_counted,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:!1,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].is_counted.split("__")[0])});else if("image"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:"image",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:!1,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value});else if("upload"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:"file",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value});else if("date"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.getnowdate(this.form_fields[t].value)});else{var s=this.form_fields[t].enable_assign;i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:s,value:this.form_fields[t].value})}}var a=this,l={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.other_data.FormCode,rule_file_info:JSON.stringify(i)},o=a.$createObj(l),r=o["keyvalue"],n=a.$apilist["countfunction"]+"?signature="+r;a.$server.post(n,o["fd"]).then((function(i){if(i.data.length>0)for(var t in i.data)for(var s in e.other_data.FField)e.other_data.FField[s].filed_code==i.data[t].field_code&&(e.other_data.FField[s].value=i.data[t].value)})).catch((function(e){}))},submitClick:function(){var e=this,i=[];for(var t in this.form_fields)if(this.form_fields[t].required){if("select_number"==this.form_fields[t].tagIcon){if(0==this.form_fields[t].is_counted)return this.$alert("请选择 "+this.form_fields[t].label+" !","提示",{confirmButtonText:"确定"}),!1}else if("number"==this.form_fields[t].tagIcon){if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(this.form_fields[t].value))return this.$alert(this.form_fields[t].label+" 请填写数字!","提示",{confirmButtonText:"确定"}),!1}else if((null==this.form_fields[t].value||""==this.form_fields[t].value)&&"divider"!=this.form_fields[t].tagIcon&&"describe"!=this.form_fields[t].tagIcon&&"describeImg"!=this.form_fields[t].tagIcon)return this.$alert("请填写 "+this.form_fields[t].label+" !","提示",{confirmButtonText:"确定"}),!1;if("number"==this.form_fields[t].tagIcon){for(var s in this.form_fields[t].assign_data){if(""==this.form_fields[t].assign_data[s].ToUserId||""==this.form_fields[t].assign_data[s].ToValue)return this.$alert(this.form_fields[t].label+" 的分配内容未完成!","提示",{confirmButtonText:"确定"}),!1;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(this.form_fields[t].assign_data[s].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;this.form_fields[t].assign_data[s].ToValue=parseFloat(this.form_fields[t].assign_data[s].ToValue)}i.push({field_code:this.form_fields[t].filed_code,assign_data:this.form_fields[t].assign_data,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)})}else if("calculate"==this.form_fields[t].tagIcon){for(var a in this.form_fields[t].assign_data){if(""==this.form_fields[t].assign_data[a].ToUserId||""==this.form_fields[t].assign_data[a].ToValue)return this.$alert(this.form_fields[t].label+" 的分配内容未完成!","提示",{confirmButtonText:"确定"}),!1;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(this.form_fields[t].assign_data[a].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;this.form_fields[t].assign_data[a].ToValue=parseFloat(this.form_fields[t].assign_data[a].ToValue)}i.push({field_code:this.form_fields[t].filed_code,assign_data:this.form_fields[t].assign_data,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)})}else{if("divider"==this.form_fields[t].tagIcon||"describe"==this.form_fields[t].tagIcon||"describeImg"==this.form_fields[t].tagIcon)continue;"select_number"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:this.form_fields[t].is_counted,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:!1,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].is_counted.split("__")[0])}):"image"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:"image",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:!1,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value}):"upload"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,opt_label:"file",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value}):"date"==this.form_fields[t].tagIcon?i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.getnowdate(this.form_fields[t].value)}):i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value})}}else if("number"==this.form_fields[t].tagIcon){for(var l in this.form_fields[t].assign_data){if(""==this.form_fields[t].assign_data[l].ToUserId||""==this.form_fields[t].assign_data[l].ToValue)return this.$alert(this.form_fields[t].label+" 的分配内容未完成!","提示",{confirmButtonText:"确定"}),!1;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(this.form_fields[t].assign_data[l].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;this.form_fields[t].assign_data[l].ToValue=parseFloat(this.form_fields[t].assign_data[l].ToValue)}i.push({field_code:this.form_fields[t].filed_code,assign_data:this.form_fields[t].assign_data,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)})}else if("calculate"==this.form_fields[t].tagIcon){for(var o in this.form_fields[t].assign_data){if(""==this.form_fields[t].assign_data[o].ToUserId||""==this.form_fields[t].assign_data[o].ToValue)return this.$alert(this.form_fields[t].label+" 的分配内容未完成!","提示",{confirmButtonText:"确定"}),!1;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(this.form_fields[t].assign_data[o].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;this.form_fields[t].assign_data[o].ToValue=parseFloat(this.form_fields[t].assign_data[o].ToValue)}i.push({field_code:this.form_fields[t].filed_code,assign_data:this.form_fields[t].assign_data,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].value)})}else{if("divider"==this.form_fields[t].tagIcon||"describe"==this.form_fields[t].tagIcon||"describeImg"==this.form_fields[t].tagIcon)continue;if("select_number"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:this.form_fields[t].is_counted,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:!1,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:parseFloat(this.form_fields[t].is_counted.split("__")[0])});else if("image"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:"image",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:!1,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value});else if("upload"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,opt_label:"file",field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.form_fields[t].value});else if("date"==this.form_fields[t].tagIcon)i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:this.form_fields[t].enable_assign,value:this.getnowdate(this.form_fields[t].value)});else{var r=this.form_fields[t].enable_assign;i.push({field_code:this.form_fields[t].filed_code,field_label:this.form_fields[t].label,join_gather:this.form_fields[t].join_gather,is_counted:this.form_fields[t].is_counted,enable_greater:this.form_fields[t].enable_greater,enable_assign:r,value:this.form_fields[t].value})}}var n=this,d={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.form_data.FormCode,form_field_info:JSON.stringify(i),main_code:this.other_data.Code},f=n.$createObj(d),_=f["keyvalue"],u=n.$apilist["edit"]+"?signature="+_;n.$server.post(u,f["fd"]).then((function(i){e.$message({message:"修改成功！",type:"success"}),e.$emit("subback"),e.close()})).catch((function(e){}))},dataFilter:function(e){this.userlist=this.userlist_two.filter((function(i){if(-1!==i.uid.indexOf(e)||-1!==i.name.indexOf(e))return!0}))},assignChange:function(){this.userlist=this.userlist_two},alluser:function(){var e=this,i=this,t={corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=i.$createObj(t),a=s["keyvalue"],l=i.$apilist["allusernameandid"]+"?signature="+a;i.$server.post(l,s["fd"]).then((function(i){e.userlist=i.data,e.userlist_two=Object.assign(i.data)})).catch((function(e){}))},detailbycode:function(){var e=this,i=this,t={corpid:this.$store.state.corpid,userid:this.$store.state.userid,main_code:this.main_code},s=i.$createObj(t),a=s["keyvalue"],l=i.$apilist["detailbycode"]+"?signature="+a;i.$server.post(l,s["fd"]).then((function(i){for(var t in e.other_data=i.data,e.form_fields=e.other_data.FField,e.form_fields){for(var s in e.other_data.FormFieldInfos)e.form_fields[t].filed_code==e.other_data.FormFieldInfos[s].field_code&&(e.form_fields[t].value=e.other_data.FormFieldInfos[s].value,""!==e.other_data.FormFieldInfos[s]["opt_label"]&&(e.form_fields[t].opt_label=e.other_data.FormFieldInfos[s].opt_label,e.form_fields[t].is_counted=e.other_data.FormFieldInfos[s].opt_label));for(var a in e.detail.FormFieldInfos)e.form_fields[t].filed_code!=e.detail.FormFieldInfos[a].field_code||"image"!=e.detail.FormFieldInfos[a].opt_label&&"file"!=e.detail.FormFieldInfos[a].opt_label||(e.form_fields[t].value=e.detail.FormFieldInfos[a].value)}6==i.data.State&&e.subClick()})).catch((function(e){}))},getformdetail:function(e){var i=this,t=this,s={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:e},a=t.$createObj(s),l=a["keyvalue"],o=t.$apilist["getformdetail"]+"?signature="+l;t.$server.post(o,a["fd"]).then((function(t){i.form_data=t.data,i.form_data.form_code=e})).catch((function(e){}))}},mounted:function(){this.alluser()},watch:{is_add:function(e){this.my_is_add=e,e&&this.detailbycode()},my_is_add:function(e){this.$emit("back",e)}}},y=k,I=(t("7357"),Object(u["a"])(y,s,a,!1,null,null,null));i["a"]=I.exports},7357:function(e,i,t){"use strict";t("87a0")},"87a0":function(e,i,t){},c8d2:function(e,i,t){var s=t("d039"),a=t("5899"),l="​᠎";e.exports=function(e){return s((function(){return!!a[e]()||l[e]()!=l||a[e].name!==e}))}},e34d:function(e,i,t){"use strict";t("5bad")}}]);