(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c47e1b3"],{"15c1":function(t,e,i){},"498a":function(t,e,i){"use strict";var s=i("23e7"),o=i("58a8").trim,n=i("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return o(this)}})},"5f87":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("a78e"),o=i.n(s);function n(t){return o.a.get(t)}},a025:function(t,e,i){"use strict";i("15c1")},bee8:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"depart_alert_F"},[i("el-dialog",{staticClass:"depart_alert",attrs:{"append-to-body":!0,title:t.title,visible:t.my_is_add,"close-on-click-modal":!1,"custom-class":"depart_aldert_dialog",width:"600px",height:"700px"},on:{"update:visible":function(e){t.my_is_add=e},close:t.close}},[i("div",{staticClass:"member_container_depart"},[i("div",{staticClass:"left member_colLeft_depart"},[i("ElementTree",{attrs:{getdata:t.alldepart,departlist:t.my_select_id_list,is_colse:t.is_colse},on:{getTreelist:t.getTreelist}})],1),i("div",{staticClass:"left member_colRight_depart"},[i("ul",t._l(t.my_selectlist,(function(e,s){return i("li",{key:s,staticClass:"step_right_li"},[i("span",{},[t._v(" "+t._s(e.Department)+" ")]),i("i",{staticClass:"el-icon-close del_select",on:{click:function(e){return t.delClick(s)}}}),i("div",{staticClass:"clearfix"})])})),0)]),i("div",{staticClass:"clearfix"}),i("div",{staticClass:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.close()}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.departSub()}}},[t._v("确定")])],1)])])],1)},o=[],n=i("4302"),r={name:"depart_alert",components:{ElementTree:n["a"]},props:{is_add:Boolean,departlist:Array,title:String},data:function(){return{alldepart:[],my_is_add:!1,my_selectlist:[],my_select_id_list:[],is_colse:!1}},methods:{departSub:function(){if(0==this.my_selectlist.length&&"权限添加"==this.title)return this.$alert(this.title+"为空！","提示",{confirmButtonText:"确定"}),!1;this.$emit("departSub",this.my_selectlist),this.close()},delClick:function(t){this.is_colse=!this.is_colse,this.$delete(this.my_selectlist,t),this.$delete(this.my_select_id_list,t);var e=JSON.stringify(this.my_selectlist);this.my_selectlist=[];var i=this;setTimeout((function(){i.my_selectlist=JSON.parse(e)}),100)},close:function(){this.is_colse=!0,this.my_is_add=!1},getTreelist:function(t){for(var e in this.my_selectlist=t.depart,this.my_select_id_list=[],this.my_selectlist)this.my_select_id_list.push(this.my_selectlist[e].depart_id)},getalldepartmenttree:function(){this.$store.state.corpid;var t=this,e=this;this.loading=!0;var i={corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["getalldepartmentanduser"]+"?signature="+o;this.$server.post(n,s["fd"]).then((function(e){t.loading=!1,t.alldepart=e.data})).catch((function(t){}))}},mounted:function(){this.getalldepartmenttree()},watch:{is_add:function(t){if(t&&(this.is_colse=!1,this.my_is_add=t,void 0!=this.departlist))for(var e in this.my_selectlist=JSON.parse(JSON.stringify(this.departlist)),this.my_select_id_list=[],this.my_selectlist)this.my_select_id_list.push(this.my_selectlist[e].depart_id)},my_is_add:function(t){this.$emit("back",t)}}},a=r,l=(i("d3a7"),i("2877")),c=Object(l["a"])(a,s,o,!1,null,null,null);e["a"]=c.exports},c8d2:function(t,e,i){var s=i("d039"),o=i("5899"),n="​᠎";t.exports=function(t){return s((function(){return!!o[t]()||n[t]()!=n||o[t].name!==t}))}},d3a7:function(t,e,i){"use strict";i("fe61")},fd92:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form_list"},[t.is_more?t._e():i("div",[i("div",{staticClass:"text_right top_form"},[i("router-link",{attrs:{to:{name:"NewForm",query:{k:Date.now()}}}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"}},[t._v("新建表单")])],1),i("el-button",{staticClass:"margin_l_15",attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.typeClick()}}},[t._v("新建分类")])],1),t._l(t.sortFun(t.formlist),(function(e){return i("div",{key:e,staticClass:"type_div"},["string"==typeof t.formlist[e]?i("p",{staticClass:"title_form",on:{mouseover:function(e){return t.mouseOverFour(e)},mouseleave:function(e){return t.mouseLeaveFour(e)}}},[i("span",{staticClass:"cursor",on:{click:function(i){return t.typeEditorClick(e,t.formlist[e])}}},[t._v(" "+t._s(t.formlist[e])+" ")]),i("span",{staticClass:"type_num_span"}),i("span",{staticClass:"type_num_span type_editor_text display_none"},[i("span",{staticClass:"dispaly_block margin_l_15 cursor",attrs:{title:"编辑"}},[i("i",{staticClass:"el-icon-edit-outline margin-l_5",on:{click:function(i){return t.typeEditorClick(e,t.formlist[e])}}})]),i("span",{staticClass:"del_span dispaly_block margin_l_5 cursor",attrs:{title:"删除"},on:{click:function(i){return t.delTypeClick(e)}}},[i("i",{staticClass:"el-icon-delete"})])])]):i("p",{staticClass:"title_form",on:{mouseover:function(e){return t.mouseOverFour(e)},mouseleave:function(e){return t.mouseLeaveFour(e)}}},[i("span",{on:{click:function(i){return t.typeEditorClick(e,t.formlist[e][0].TypeContent)}}},[t._v(" "+t._s(t.formlist[e][0].TypeContent)+" ")]),i("span",{staticClass:"type_num_span type_editor_text display_none"},["1"!=e?i("span",{staticClass:"dispaly_block margin_l_15",attrs:{title:"编辑"}},[i("i",{staticClass:"el-icon-edit-outline margin-l_5",on:{click:function(i){return t.typeEditorClick(e,t.formlist[e][0].TypeContent)}}})]):t._e(),"1"!=e?i("span",{staticClass:"del_span dispaly_block margin_l_5",attrs:{title:"删除"},on:{click:function(i){return t.delTypeClick(e)}}},[i("i",{staticClass:"el-icon-delete"})]):t._e()])]),i("div",{staticClass:"clearfix"}),0==t.isString(t.formlist[e])?i("ul",{staticClass:"eform-list clearfix"},t._l(t.formlist[e],(function(e){return i("li",{key:e,on:{mouseover:function(e){return t.mouseOver(e)},mouseleave:function(e){return t.mouseLeave(e)}}},[i("div",{staticClass:"list_box"},[i("div",{staticClass:"content_list_item"},[i("p",{staticClass:"left width_180",attrs:{title:"点击修改表单名"},on:{click:function(i){return t.formEditorClick(e)}}},[i("span",{staticClass:"p_over cursor",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(e.Title)+" ")])]),i("div",{staticClass:"clearfix"})]),i("div",[i("p",{staticClass:"time_p_formlist"},[t._v(" "+t._s(new Date(+new Date(new Date(e.CreateTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3))+" ")])]),i("div",[i("ul",{staticClass:"operation flex right"},[i("li",[i("span",{on:{click:function(i){return t.eidtorFormClick(e.Code)}}},[t._v(" 编辑 ")])]),i("li",[i("div",{on:{mouseover:function(e){return t.mouseOverTwo(e)},mouseleave:function(e){return t.mouseLeaveTwo(e)}}},[i("span",[t._v("更多 ")]),i("i",{staticClass:"el-icon-arrow-down"})]),i("div",{staticClass:"dropdown_div",on:{mouseover:function(e){return t.mouseOverThree(e)},mouseleave:function(e){return t.mouseLeaveThree(e)}}},[i("ul",{staticClass:"dropdown_ul"},[i("li",{on:{click:function(i){return t.gorFormClick(e.Code)}}},[t._v("预览")]),i("li",{on:{click:function(i){return t.gorCopyClick(e.Code)}}},[t._v("复制")]),i("li",{on:{click:function(i){return t.delClick(e)}}},[t._v("删除")]),i("li",{on:{click:function(i){return t.typeItemEditorClick(e)}}},[t._v("修改分类")]),i("li",{on:{click:function(i){return t.authorizationFormClick(e)}}},[t._v("授权导入")])]),i("div",{staticClass:"clearfix"})])])])])])])})),0):t._e(),i("div",{staticClass:"clearfix"})])}))],2),i("el-dialog",{attrs:{title:"编辑表单名",visible:t.is_form_editor,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.is_form_editor=e}}},[i("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",[i("el-input",{model:{value:t.form_title,callback:function(e){t.form_title=e},expression:"form_title"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.is_form_editor=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.formEditorSub()}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"编辑分类名",visible:t.is_type_editor,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.is_type_editor=e}}},[i("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",[i("el-input",{model:{value:t.conent_type,callback:function(e){t.conent_type=e},expression:"conent_type"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.is_type_editor=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.typeEditorSub()}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"编辑分类",visible:t.is_type_editor_item,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.is_type_editor_item=e}}},[i("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",[i("el-select",{staticStyle:{width:"100%"},model:{value:t.typeid_item,callback:function(e){t.typeid_item=e},expression:"typeid_item"}},t._l(t.typelist,(function(t){return i("el-option",{key:t,attrs:{label:t.Content,value:t.Id}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.is_type_editor_item=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.typeItemEditorSub()}}},[t._v("确 定")])],1)],1),i("type-alert",{attrs:{is_add:t.is_add},on:{back:t.typeBack,subBack:t.subTypeBack}}),i("DepartAlert",{attrs:{is_add:t.is_depart,departlist:t.departlist,title:"表单授权"},on:{back:t.departBack,departSub:t.departSub}}),i("MoreFormList",{attrs:{is_more:t.is_more,typeid:t.typeid,typename:t.typename},on:{back:t.moreBack}})],1)},o=[],n=(i("99af"),i("b64b"),i("498a"),i("5f87"),i("5a6e")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"type_alert"},[i("el-dialog",{attrs:{title:"新建分类",visible:t.my_is_add,"close-on-click-modal":!1,"custom-class":"depart_aldert_dialog",width:"600px",height:"700px","before-close":t.handleClose},on:{"update:visible":function(e){t.my_is_add=e},close:t.close}},[i("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"表单分类名称"}},[i("el-input",{attrs:{placeholder:"请填写"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addType()}}},[t._v("确 定")])],1)],1)],1)},a=[],l={name:"type_alert",props:{is_add:Boolean},data:function(){return{my_is_add:!1,content:""}},methods:{close:function(){this.my_is_add=!1},addType:function(){var t=this,e=this;if(""==this.content)return this.$alert("请填写分类名！","提示",{confirmButtonText:"确定"}),!1;var i={type_desc:"规则类型",corpid:this.$store.state.corpid,userid:this.$store.state.userid,content:this.content},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["addonetype"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.$message({type:"success",message:"新建表单分类成功!"}),t.content="",t.close(),t.$emit("subBack")})).catch((function(t){}))}},watch:{is_add:function(t){this.my_is_add=t},my_is_add:function(t){this.$emit("back",t)}}},c=l,u=i("2877"),d=Object(u["a"])(c,r,a,!1,null,null,null),p=d.exports,m=i("bee8"),_={name:"formlist",components:{TypeAlert:p,DepartAlert:m["a"]},data:function(){return{active:[],num:[],is_add:!1,formlist:[],is_type_editor:!1,conent_type:"",typeid:"",is_type_editor_item:!1,conent_type_item:"",typeid_item:"",typelist:[],is_form_editor:!1,form_code:"",form_title:"",departlist:[],is_depart:!1,is_more:!1,typename:""}},methods:{isString:function(t){return"string"==typeof t?1:0},sortFun:function(t){var e=[],i=[],s=Object.keys(t);for(var o in s)"string"==typeof t[s[o]]?i.push(s[o]):e.push(s[o]);return e.concat(i)},gorFormClick:function(t){var e=this.$router.resolve({name:"lookForm",query:{id:Object(n["b"])(t)}});window.open(e.href,"_blank")},moreClick:function(t,e){this.is_more=!this.is_more,this.typeid=t,this.typename=e},moreBack:function(t){this.is_more=t},delClick:function(t){var e=this;this.$confirm("此操作将永久删除该表单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=e,s={corpid:e.$store.state.corpid,userid:e.$store.state.userid,form_code:t.Code},o=i.$createObj(s),n=o["keyvalue"],r=i.$apilist["deltemplateform"]+"?signature="+n;i.$server.post(r,o["fd"]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getalltemplateform()})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}))},authorizationFormClick:function(t){this.is_depart=!0,this.form_code=t.Code,null==t.CooperationInfo?this.departlist=[]:this.departlist=t.CooperationInfo},departBack:function(t){this.is_depart=t},departSub:function(t){var e=this,i=this;for(var s in t)delete t[s].Children,delete t[s].ParentId;var o={cooper:JSON.stringify(t),corpid:this.$store.state.corpid,userid:this.$store.state.userid,code:this.form_code},n=i.$createObj(o),r=n["keyvalue"],a=i.$apilist["updatecooper"]+"?signature="+r;i.$server.post(a,n["fd"]).then((function(t){e.$message({type:"success",message:"授权成功!"}),e.departlist=[],e.getalltemplateform()})).catch((function(t){}))},eidtorFormClick:function(t){var e=Object(n["b"])(t);this.$router.push({name:"editorForm",query:{k:e}})},gorCopyClick:function(t){var e=Object(n["b"])(t);this.$router.push({name:"copyForm",query:{k:e}})},formEditorClick:function(t){this.is_form_editor=!0,this.form_title=t.Title,this.form_code=t.Code},formEditorSub:function(){var t=this,e=this;if(""==this.form_title.trim())return this.$alert("请填写表单名！","提示",{confirmButtonText:"确定"}),!1;var i={title:this.form_title,corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.form_code},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["edittemplateformtitle"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.is_form_editor=!1,t.getalltemplateform()})).catch((function(t){}))},typeItemEditorClick:function(t){this.is_type_editor_item=!0,this.typeid_item=t.TypeId,this.conent_type_item=t.Code},typeItemEditorSub:function(){var t=this,e=this,i={type_id:this.typeid_item,corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.conent_type_item},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["edittemplateformtype"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.is_type_editor_item=!1,t.getalltemplateform()})).catch((function(t){}))},typeEditorClick:function(t,e){this.is_type_editor=!0,this.typeid=t,this.conent_type=e},typeEditorSub:function(){var t=this,e=this,i={id:this.typeid,corpid:this.$store.state.corpid,userid:this.$store.state.userid,content:this.conent_type},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["editonetype"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.is_type_editor=!1,t.getalltemplateform()})).catch((function(t){}))},delTypeClick:function(t){var e=this,i=this;this.$confirm("删除分类后，给分类的表单会自动归类到【其他】中, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s={id:t,corpid:e.$store.state.corpid,userid:e.$store.state.userid,content:e.content},o=i.$createObj(s),n=o["keyvalue"],r=i.$apilist["delonetype"]+"?signature="+n;i.$server.post(r,o["fd"]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getalltemplateform()})).catch((function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},typeClick:function(){this.is_add=!this.is_add},typeBack:function(t){this.is_add=t},subTypeBack:function(){this.getalltemplateform()},mouseOver:function(t){t.currentTarget.className="  active"},mouseLeave:function(t){t.currentTarget.className=""},mouseOverTwo:function(t){t.currentTarget.nextElementSibling.className="dropdown_div_active"},mouseLeaveTwo:function(t){t.currentTarget.nextElementSibling.className="dropdown_div"},mouseOverThree:function(t){t.currentTarget.className="  dropdown_div_active"},mouseLeaveThree:function(t){t.currentTarget.className="dropdown_div"},mouseOverFour:function(t){t.currentTarget.lastElementChild.className=" type_num_span type_editor_text display_block"},mouseLeaveFour:function(t){t.currentTarget.lastElementChild.className="display_none"},getalltemplateform:function(){var t=this,e=this,i={corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["gettemplateforminfo"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.formlist=e.data})).catch((function(t){}))},getallbytype:function(){var t=this,e=this,i={typedesc:"规则类型",corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=e.$createObj(i),o=s["keyvalue"],n=e.$apilist["getallbytype"]+"?signature="+o;e.$server.post(n,s["fd"]).then((function(e){t.typelist=e.data})).catch((function(t){}))}},mounted:function(){this.getalltemplateform(),this.getallbytype()}},f=_,h=(i("a025"),Object(u["a"])(f,s,o,!1,null,null,null));e["default"]=h.exports},fe61:function(t,e,i){}}]);