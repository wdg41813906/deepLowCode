(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50bcd28a"],{"066a":function(t,e,s){},2046:function(t,e,s){"use strict";s("066a")},"20f5":function(t,e,s){t.exports=s.p+"img/none.d30ea1a5.png"},"317d":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"depart_alert"},[s("el-dialog",{staticClass:"depart_alert",attrs:{title:t.title,visible:t.my_is_add,"close-on-click-modal":!1,"custom-class":"depart_aldert_dialog",width:"600px",height:"700px","append-to-body":!0},on:{"update:visible":function(e){t.my_is_add=e},close:t.close}},[s("div",{staticClass:"member_container"},[s("div",{staticClass:"left member_colLeft"},[s("ElementTree",{attrs:{getdata:t.alldepart,departlist:t.my_select_id_list,is_colse:t.is_colse},on:{getTreelist:t.getTreelist}})],1),s("div",{staticClass:"left member_colRight"},[s("ul",t._l(t.my_selectlist,(function(e,i){return s("li",{key:i,staticClass:"step_right_li"},[s("span",{},[t._v(" "+t._s(e.Department)+" ")]),s("i",{staticClass:"el-icon-close del_select",on:{click:function(e){return t.delClick(i)}}}),s("div",{staticClass:"clearfix"})])})),0)]),s("div",{staticClass:"clearfix"}),s("div",{staticClass:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){return t.close()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.departSub()}}},[t._v("确定")])],1)])])],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"element_tree_address"},[i("div",{staticClass:"member_coolLeft_top element_left"},[i("el-input",{staticClass:"search_tree",attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),i("el-tree",{ref:"tree",attrs:{data:t.datalist,"show-checkbox":"","node-key":"depart_id",props:t.defaultProps,"filter-node-method":t.filterNode,"default-expanded-keys":["1"],"default-checked-keys":t.departlist,"check-strictly":!0},on:{"check-change":t.handleCheckChange},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node;return i("span",{staticClass:"custom-tree-node"},[i("span",[1==a.data.IsDepart||"true"==a.data.IsDepart?i("img",{attrs:{src:s("b945"),alt:""}}):i("img",{attrs:{src:s("059b"),alt:""}})]),t._v(" "+t._s(a.label)+" ")])}}])},[t._v(" > ")])],1)},l=[],n=(s("99af"),s("c975"),s("a434"),s("a9e3"),s("b64b"),s("d3b7"),s("ac1f"),s("25f0"),s("1276"),s("5a6e")),d={name:"element_tree",props:{getdata:Array,departlist:Array,key:Number,is_colse:Boolean},data:function(){return{datalist:[],defaultProps:{id:"id",label:"Department",children:"Children",parent_id:"ParentId",depart_id:"depart_id"},filterText:"",selectlist:[],list_select:[]}},methods:{handleCheckChange:function(t,e,s){if(this.getCheckedNodes(),e){var i=[t.id];this.$refs.tree.setCheckedKeys(i),this.getCheckedNodes()}else this.getCheckedNodes()},getCheckedNodes:function(){var t=this.$refs.tree.getCheckedNodes();""!=this.filterText&&(t=t.concat(this.list_select));var e=[],s=[],i=[];for(var a in t)-1==i.indexOf(parseInt(t[a].ParentId))&&(1==t[a].IsDepart?e.push(t[a]):s.push(t[a])),i.push(parseInt(t[a].DepartId));this.unique(t);this.$emit("getTreelist",{depart:t,label:s})},unique:function(t){for(var e=0;e<t.length;e++)for(var s=e+1;s<t.length;s++)t[e].depart_id==t[s].depart_id&&(t.splice(s,1),s--);return t},getHalfCheckedNodes:function(){},getTreeData:function(){this.datalist=JSON.parse(JSON.stringify(this.getdata))},filterNode:function(t,e){return!t||-1!==e.Department.indexOf(t)},searchid:function(){var t=this,e={corpid:this.$store.state.corpid,query_word:this.filterText},s=this,i=s.$createObj(e),a=i["keyvalue"],r=s.$apilist["searchcontact"]+"?signature="+a;s.$server.post(r,i["fd"]).then((function(e){var s=[],i=[];if(0!=Object.keys(e.query_result).length&&-1!=Object.keys(e.query_result).indexOf("party"))for(var a in e.query_result.party.department_id)s.push({id:e.query_result.party.department_id[a].toString(),depart_id:e.query_result.party.department_id[a].toString(),IsDepart:!0});if(0!=Object.keys(e.query_result).length&&-1!=Object.keys(e.query_result).indexOf("user"))for(var r in e.query_result.user.userid)i.push({id:e.query_result.user.userid[r],IsDepart:!1,depart_id:e.query_result.usermap[e.query_result.user.userid[r]][0]+"-"+e.query_result.user.userid[r]});t.datalist=i.concat(s);for(var l=JSON.stringify(t.list_select),n=0;n<s.length;n++)if(l.indexOf(t.datalist[n].toString())>-1)for(var d=0;d<t.list_select.length;d++)if(t.datalist[n].depart_id==t.list_select[d].depart_id){t.$delete(t.list_select,d);break}})).catch((function(t){}))}},mounted:function(){var t=this;for(var e in this.$watch("filterText",Object(n["d"])((function(e){""!=e?t.searchid():t.getTreeData()}),200)),this.datalist=JSON.parse(JSON.stringify(this.getdata)),this.list_select=[],this.departlist)this.list_select.push({depart_id:this.departlist[e].toString(),IsDepart:!0})},watch:{is_colse:function(t){for(var e in this.list_select=[],this.departlist)this.list_select.push({depart_id:this.departlist[e].toString(),IsDepart:!0})},getdata:function(){for(var t in this.getTreeData(),this.departlist)this.selectlist.push(this.departlist[t].depart_id);var e=this;setTimeout((function(){e.departlist.length>0&&this.$refs.tree.setCheckedKeys(e.departlist)}),500)},departlist:function(t){if(this.$refs.tree.setCheckedKeys(this.departlist),""==this.filterText)for(var e in this.list_select=[],this.departlist)this.list_select.push({depart_id:this.departlist[e].toString(),IsDepart:!(this.departlist[e].split("-").length>1)})}}},o=d,c=(s("e53e"),s("2877")),u=Object(c["a"])(o,r,l,!1,null,null,null),_=u.exports,p={name:"depart_alert",components:{ElementTree:_},props:{is_add:Boolean,departlist:Array,title:String},data:function(){return{alldepart:[],my_is_add:!1,my_selectlist:[],my_select_id_list:[],is_colse:!1}},methods:{departSub:function(){if(0==this.my_selectlist.length&&"填报对象"==this.title)return this.$alert(this.title+"为空！","提示",{confirmButtonText:"确定"}),!1;this.$emit("departSub",this.my_selectlist),this.close()},delClick:function(t){this.is_colse=!this.is_colse,this.$delete(this.my_selectlist,t),this.$delete(this.my_select_id_list,t);var e=JSON.stringify(this.my_selectlist);this.my_selectlist=[];var s=this;setTimeout((function(){s.my_selectlist=JSON.parse(e)}),100)},close:function(){this.is_colse=!0,this.my_is_add=!1},getTreelist:function(t){for(var e in this.my_selectlist=t.depart,this.my_select_id_list=[],this.my_selectlist)this.my_select_id_list.push(this.my_selectlist[e].depart_id)},getalldepartmenttree:function(){var t=this,e=(this.$store.state.corpid,this),s=this;this.loading=!0;var i={corpid:this.$store.state.corpid,userid:this.$store.state.userid},a=s.$createObj(i),r=a["keyvalue"],l=s.$apilist["getalldepartment"]+"?signature="+r;this.$server.post(l,a["fd"]).then((function(s){if(e.loading=!1,e.alldepart=s.data,void 0!=t.departlist)for(var i in t.my_selectlist=JSON.parse(JSON.stringify(t.departlist)),t.my_select_id_list=[],t.my_selectlist)t.my_select_id_list.push(t.my_selectlist[i].depart_id)})).catch((function(t){}))}},mounted:function(){},watch:{is_add:function(t){t&&(this.is_colse=!1,this.my_is_add=t,this.getalldepartmenttree())},my_is_add:function(t){this.$emit("back",t)}}},h=p,f=(s("aab8"),Object(c["a"])(h,i,a,!1,null,null,null));e["a"]=f.exports},"5bcd":function(t,e,s){},a19e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fill_index"},[i("div",{staticClass:"fill_top flex"},[i("div",{staticClass:"flex_item"},[""!=t.task_detail.Code?i("div",{staticClass:"left_fill_top_content"},[i("div",{staticClass:"left_content_top"},[i("p",{staticClass:"p_over task_name_p",attrs:{title:t.task_detail.Title}},[t._v(" "+t._s(t.task_detail.Title)+" ")]),i("p",{staticClass:"flow_per flow_time"},[t._v(" "+t._s(new Date(+new Date(new Date(t.task_detail.StartDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+"至"+t._s(new Date(+new Date(new Date(t.task_detail.EndDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+" ")]),i("p",{staticClass:"flow_per p_over_2 remark_p"},[t._v(" "+t._s(t.task_detail.TRemark)+" ")])]),i("div",{staticClass:"left_user"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("span",{staticClass:"user_title"},[t._v("填报人信息")])]),i("el-col",{staticClass:"text_right",attrs:{span:12}},[i("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.editorUserClick()}}})]),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"other_span"},[t._v("工号：")]),t._v(" "+t._s(t.task_detail.UserId)+" ")]),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"other_span"},[t._v("姓名：")]),t._v(t._s(t.task_detail.Name)+" ")]),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"other_span"},[t._v("职位：")]),0==t.task_detail.Position?i("span",[t._v("无")]):i("span",[t._v(" "+t._s(t.task_detail.PositionInfo)+" ")])]),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"other_span"},[t._v("职称：")]),t._v(t._s(t.task_detail.UserState)+" "),0==t.task_detail.Career?i("span",[t._v("无")]):i("span",[t._v(" "+t._s(t.task_detail.CareerInfo)+" ")])]),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"other_span"},[t._v("学院：")]),""==t.task_detail.Department||null==t.task_detail.Department?i("span",[t._v("未设置")]):i("span",[t._v(t._s(t.task_detail.Department))])])],1)],1),i("div",{staticClass:"left_btn text_center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.gourl(t.task_detail.Code)}}},[t._v("查看详情")])],1)]):i("div",{staticClass:"left_fill_top_content text_center"},[i("img",{attrs:{src:s("d9c9"),width:"130px",alt:""}}),i("p",[t._v("当前暂无申报任务")])])]),i("div",{staticClass:"flex_item"},[i("div",{staticClass:"right_fill_top_content"},[i("p",{staticClass:"audit_name_p"},[t._v("工作量数据审核情况")]),i("div",{staticClass:"flex audit_content"},[i("div",{staticClass:"flex_item"},[i("p",{staticClass:"audit_num"},[t._v(t._s(t.main_data.DenyCount))]),i("p",{staticClass:"audit_font"},[t._v(" 已退回"),""!=t.task_detail.Code?i("span",{staticClass:"other_font cursor",on:{click:function(e){return t.gourlTwo()}}},[t._v("(查看)")]):t._e()])]),i("div",{staticClass:"flex_item"},[i("p",{staticClass:"audit_num"},[t._v(t._s(t.main_data.PassedCount))]),i("p",{staticClass:"audit_font"},[t._v("已通过")])]),i("div",{staticClass:"flex_item"},[i("p",{staticClass:"audit_num"},[t._v(t._s(t.main_data.ReviewingCount))]),i("p",{staticClass:"audit_font"},[t._v(" 审核中"),""!=t.task_detail.Code?i("span",{staticClass:"other_font cursor",on:{click:function(e){return t.gourlTwo()}}},[t._v("(查看)")]):t._e()])])])])])]),i("div",{staticClass:"fill_middle"},[i("p",{staticClass:"title_fill_middle"},[t._v("工作量申报历史")]),i("div",{staticClass:"history_div"},[0==t.historylist.length?i("div",{staticClass:"text_center"},[i("img",{attrs:{src:s("20f5"),alt:""}}),i("p",[t._v("暂无数据")])]):t._e(),i("ul",{staticClass:"history_list"},t._l(t.historylist,(function(e){return i("li",{key:e.Code},[i("i",{staticClass:"el-icon-guide"}),i("a",{on:{click:function(s){return t.gourlEnd(e)}}},[t._v(t._s(e.Title)+"( "+t._s(new Date(+new Date(new Date(e.StartDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+"至 "+t._s(new Date(+new Date(new Date(e.EndDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+")")]),i("span",[t._v(" "+t._s(new Date(+new Date(new Date(e.CreateTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+" ")])])})),0),t.historylist.length>0?i("div",{staticClass:"pagination_div text_center"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])]),i("EditorUserDetail",{attrs:{is_add:t.is_add,detail:t.task_detail},on:{back:t.editorUserBack,sub:t.editorUserSub}})],1)},a=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor_user_alert"},[s("el-dialog",{attrs:{title:"编辑当前任务的个人信息",visible:t.my_is_add,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.my_is_add=e}}},[s("div",[s("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:t.ruleForm,rules:t.rules}},[s("el-form-item",{attrs:{label:"工号",prop:"userid"}},[s("el-input",{attrs:{placeholder:"成员唯一标识",size:"small",disabled:""},model:{value:t.ruleForm.userid,callback:function(e){t.$set(t.ruleForm,"userid",e)},expression:"ruleForm.userid"}})],1),s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入用户名",size:"small"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),s("el-form-item",{attrs:{label:"职位",prop:"position"}},[s("el-select",{model:{value:t.ruleForm.position,callback:function(e){t.$set(t.ruleForm,"position",e)},expression:"ruleForm.position"}},t._l(t.position_list,(function(t){return s("el-option",{key:t.Id,attrs:{label:t.Title,value:t.Id}})})),1)],1),s("el-form-item",{attrs:{label:"职称",prop:"career"}},[s("el-select",{model:{value:t.ruleForm.career,callback:function(e){t.$set(t.ruleForm,"career",e)},expression:"ruleForm.career"}},t._l(t.career_list,(function(t){return s("el-option",{key:t.Id,attrs:{label:t.Title,value:t.Id}})})),1)],1),s("el-form-item",{attrs:{label:"学院",prop:"departid"}},[s("div",{staticClass:"editor_right",staticStyle:{display:"table-cell"}},[s("div",{staticClass:"ww_groupSelBtn"},t._l(t.selectdepart,(function(e){return s("div",{key:e.id,staticClass:"ww_groupSelBtn_item"},[s("span",{staticClass:"ww_img"}),s("span",{staticClass:"ww_groupSelBtn_item_text"},[t._v(t._s(e.Department))]),s("i",{staticClass:"el-icon-close img_icon",on:{click:function(s){return t.deldepart(e)}}})])})),0),s("div",{staticClass:"ww_groupSelBtn ww_groupSelBtn_add",on:{click:t.addDepartClick}},[t._v(" 修改 ")])])])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subClick("ruleForm")}}},[t._v("保 存")])],1)]),s("depart-alert",{attrs:{is_add:t.is_depart,departlist:t.selectdepart,title:"请选择学院"},on:{departSub:t.departSub,back:t.addPEvent}})],1)},l=[],n=(s("c975"),s("317d")),d={name:"new_task_alert",props:{is_add:Boolean,detail:Object},components:{DepartAlert:n["a"]},data:function(){return{is_depart:!1,career_list:[],position_list:[],selectdepart:{},my_detail:{},my_is_add:!1,state_list:[{label:"普通填报",value:0},{label:"首次填报",value:1}],ruleForm:{task_code:"",userid:"",username:"",departid:"",position:"",career:"",state:""},rules:{departid:[{required:!0,message:"请选择部门",trigger:"blur"}],userid:[{required:!0,message:"请输入工号",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],position:[{required:!0,message:"请选择职位",trigger:"blur"}],career:[{required:!0,message:"请选择职称",trigger:"blur"}],state:[{required:!0,message:"请选择填报状态",trigger:"blur"}]}}},methods:{deldepart:function(t){var e=this.selectdepart.indexOf(t);e>-1&&this.$delete(this.selectdepart,e),this.ruleForm.departid=""},departSub:function(t){this.selectdepart=t,this.ruleForm.departid=t[0].id},addPEvent:function(t){this.is_depart=t},addDepartClick:function(){this.is_depart=!this.is_depart},back:function(){this.my_is_add=!1},subClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var s=e.ruleForm,i=e.$createObj(s),a=i["keyvalue"],r=e.$apilist["edittaskuser"]+"?signature="+a;e.$server.post(r,i["fd"]).then((function(t){e.$message({message:"编辑成功！",type:"success"}),e.back(),e.$emit("sub")}))}))},getallposition:function(){var t=this,e={corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=this.$createObj(e),i=s["keyvalue"],a=this.$apilist["getallposition"]+"?signature="+i;this.$server.post(a,s["fd"]).then((function(e){e.data.unshift({Title:"无",Id:0}),t.position_list=e.data})).catch((function(t){}))},getallcareer:function(){var t=this,e={corpid:this.$store.state.corpid,userid:this.$store.state.userid},s=this.$createObj(e),i=s["keyvalue"],a=this.$apilist["getallcareer"]+"?signature="+i;this.$server.post(a,s["fd"]).then((function(e){e.data.unshift({Title:"无",Id:0}),t.career_list=e.data})).catch((function(t){}))}},mounted:function(){this.getallposition(),this.getallcareer()},watch:{is_add:function(t){this.my_is_add=t,t&&(this.my_detail=JSON.parse(JSON.stringify(this.detail)),this.selectdepart=[{id:this.my_detail.DepartmentId,depart_id:this.my_detail.DepartmentId,Department:this.my_detail.Department}],this.ruleForm={task_code:this.my_detail.Code,userid:this.my_detail.UserId,username:this.my_detail.Name,position:this.my_detail.Position,departid:this.my_detail.DepartmentId,career:this.my_detail.Career,state:this.my_detail.State})},my_is_add:function(t){this.$emit("back",t)}}},o=d,c=(s("c33c"),s("2877")),u=Object(c["a"])(o,r,l,!1,null,null,null),_=u.exports,p=s("5a6e"),h={name:"fill_index",components:{EditorUserDetail:_},data:function(){return{count:0,pagesize:10,currentPage:1,historylist:[],task_detail:{},is_add:!1,main_data:{},task_code:"",tableProps:{border:!0,"header-cell-style":{background:"#eef1f6",color:"#606266"}},filters:[{prop:"user_name",value:""}]}},methods:{handleSizeChange:function(t){this.pagesize=t,this.historytask(this.pagesize,this.currentPage)},handleCurrentChange:function(t){this.currentPage=t,this.historytask(this.pagesize,this.currentPage)},gourl:function(t){this.$router.push({name:"formlistFill",query:{id:Object(p["b"])(this.task_detail.Code)}})},gourlTwo:function(){this.$router.push({name:"formlistFill",query:{id:Object(p["b"])(this.task_detail.Code),other:1}})},gourlEnd:function(t){var e=JSON.parse(JSON.stringify(t));this.$router.push({name:"endlistFill",query:{id:Object(p["b"])(e.Code),name:Object(p["b"])(e.Title)}})},editorUserClick:function(){this.is_add=!0},editorUserBack:function(t){this.is_add=t},editorUserSub:function(){this.getactivetask()},getactivetask:function(){var t=this,e=this,s={corpid:this.$store.state.corpid,userid:this.$store.state.userid},i=e.$createObj(s),a=i["keyvalue"],r=e.$apilist["getactivetask"]+"?signature="+a;e.$server.post(r,i["fd"]).then((function(e){t.task_detail=e.data,t.task_code=e.data.Code,t.maincountinfo()})).catch((function(t){}))},historytask:function(t,e){var s=this,i=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,page_size:t,page_index:e},r=i.$createObj(a),l=r["keyvalue"],n=i.$apilist["historytask"]+"?signature="+l;this.loading=!0,i.$server.post(n,r["fd"]).then((function(t){s.loading=!1,s.historylist=t.data.data,s.count=t.data.count})).catch((function(t){}))},maincountinfo:function(){var t=this,e=this,s=(this.$route.query.id,{corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:this.task_code}),i=e.$createObj(s),a=i["keyvalue"],r=e.$apilist["maincountinfo"]+"?signature="+a;e.$server.post(r,i["fd"]).then((function(e){t.main_data=e.data})).catch((function(t){}))}},mounted:function(){this.getactivetask(),this.historytask()}},f=h,m=(s("2046"),Object(c["a"])(f,i,a,!1,null,null,null));e["default"]=m.exports},aab8:function(t,e,s){"use strict";s("f3a8")},c33c:function(t,e,s){"use strict";s("5bcd")},c913:function(t,e,s){},d9c9:function(t,e,s){t.exports=s.p+"img/other_none.6e5f394c.png"},e53e:function(t,e,s){"use strict";s("c913")},f3a8:function(t,e,s){}}]);