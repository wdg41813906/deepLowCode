(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a5804a4"],{"0143":function(t,e,a){"use strict";a("0cdb")},"0cdb":function(t,e,a){},"184a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task_alert"},[a("el-dialog",{attrs:{title:"新建任务",visible:t.my_is_add,width:"600px","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.my_is_add=e}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名",prop:"title"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"时间",prop:"dateval"}},[a("div",{staticClass:"el-input"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.ruleForm.dateval,callback:function(e){t.$set(t.ruleForm,"dateval",e)},expression:"ruleForm.dateval"}})],1)]),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subClick("ruleForm")}}},[t._v("确 定")])],1)])],1)},s=[],r={name:"new_task_alert",props:{is_add:Boolean},data:function(){var t=function(t,e,a){if(0==e.length)return a(new Error("请选择日期"));a()};return{termlist:[],my_is_add:!1,ruleForm:{title:"",remark:"",term:"1",dateval:[]},rules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],dateval:[{validator:t,trigger:"blur"}]}}},mounted:function(){this.getterm()},methods:{back:function(){this.my_is_add=!1},getterm:function(){var t=this,e={userid:this.$store.state.userid,corpid:this.$store.state.corpid},a=this.$createObj(e),i=a["keyvalue"],s=this.$apilist["term"]+"?signature="+i;this.$server.post(s,a["fd"]).then((function(e){t.termlist=e.data.reverse()}))},subClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a={userid:e.$store.state.userid,corpid:e.$store.state.corpid,title:e.ruleForm.title,remark:e.ruleForm.remark,term:e.ruleForm.term,start_date:e.ruleForm.dateval[0],end_date:e.ruleForm.dateval[1]},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["addonetask"]+"?signature="+s;e.$server.post(r,i["fd"]).then((function(t){e.$message({message:"添加成功！",type:"success"}),e.back(),e.ruleForm={title:"",remark:"",term:"1",dateval:[]},e.$emit("sub")}))}))}},watch:{is_add:function(t){this.my_is_add=t},my_is_add:function(t){this.$emit("back",t)}}},l=r,o=(a("b06a"),a("2877")),n=Object(o["a"])(l,i,s,!1,null,null,null);e["a"]=n.exports},"4d82":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.is_public?a("div",{staticClass:"public_alert"},[a("el-dialog",{attrs:{title:"公示",visible:t.is_public,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.is_public=e}}},[a("el-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"任务名"}},[a("label",{attrs:{for:""}},[t._v(t._s(t.detail.Title))])]),a("el-form-item",{attrs:{label:"公示状态"}},[a("el-radio",{attrs:{label:!0},model:{value:t.detail.IsPub,callback:function(e){t.$set(t.detail,"IsPub",e)},expression:"detail.IsPub"}},[t._v("开始")]),a("el-radio",{attrs:{label:!1},model:{value:t.detail.IsPub,callback:function(e){t.$set(t.detail,"IsPub",e)},expression:"detail.IsPub"}},[t._v("结束")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updatepubinfo()}}},[t._v("确 认")])],1)],1),a("DepartAlertP",{attrs:{is_add:t.is_depart_p,departlist:t.publiclist,title:"公示部门"},on:{back:t.departPBack,departSub:t.departPSub}})],1):t._e()},s=[],r=a("361f"),l={name:"public_alert",props:{is_add:!1,detail:Object},components:{DepartAlertP:r["a"]},data:function(){return{is_public:!1,is_depart_p:!1,publiclist:[],radio:0,date_time:[],remark:""}},methods:{departPSub:function(t){for(var e in this.publiclist=t,t)delete this.publiclist[e].Children,delete this.publiclist[e].ParentId},departPClick:function(){this.is_depart_p=!this.is_depart_p},departPBack:function(t){this.is_depart_p=t},getpubinfo:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:this.detail.Code},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["getpubinfo"]+"?signature="+s;e.$server.post(r,i["fd"]).then((function(e){null!=e.data.PubScope?t.publiclist=e.data.PubScopeInfo:t.publiclist=[],t.radio=e.data.State,""==e.data.StartDate||""==e.data.StartDate?t.date_time=[]:t.date_time=[1e3*e.data.StartDate,1e3*e.data.EndDate]})).catch((function(t){}))},updatepubinfo:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:this.detail.Code,state:this.radio},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["pubtask"]+"?signature="+s;e.$server.post(r,i["fd"]).then((function(e){t.$message({message:"操作成功！",type:"success"}),t.is_public=!1,t.$emit("sub")})).catch((function(t){}))}},watch:{is_add:function(t){t&&(1==this.detail.IsPub?this.radio=1:this.radio=0,this.is_public=t)},is_public:function(t){this.$emit("back",t),this.radio=0}}},o=l,n=(a("0143"),a("2877")),c=Object(n["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"5e50":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task_list"},[a("div",{staticClass:"text_right top_form"},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(e){return t.newClick()}}},[t._v("新建任务")])],1),a("div",[a("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tasklist,"pagination-props":{pageSizes:[5,10,15]},"row-key":t.row_key,"expand-row-keys":t.expandRowKeys,"table-props":t.tableProps},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"任务名",prop:"Title"}}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(+new Date(new Date(e.row.StartDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+"至"+t._s(new Date(+new Date(new Date(e.row.EndDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0]))]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"Remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.Remark?a("span",[t._v("无")]):a("p",{staticClass:"p_over_2",attrs:{title:e.row.Remark}},[t._v(" "+t._s(e.row.Remark)+" ")])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flow-permisson-row"},[a("span",[0==e.row.State?a("span",{staticClass:"success flow_per"},[t._v("进行中")]):t._e(),1==e.row.State?a("span",{staticClass:"flow_per warning"},[t._v("未开始")]):t._e(),2==e.row.State?a("span",{staticClass:"flow_per danger"},[t._v("结束")]):t._e(),-1==e.row.State?a("span",{staticClass:"flow_per danger"},[t._v("锁定")]):t._e()])])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",[a("i",{staticClass:"el-icon-more font_18 cursor"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[-1!=e.row.State?a("el-dropdown-item",[a("p",{staticClass:"link_font",attrs:{underline:!1,type:"primary"},on:{click:function(a){return t.switchClick(e.row)}}},[1==e.row.State||2==e.row.State?a("span",{staticClass:"success"},[t._v("激活")]):a("span",{staticClass:"danger"},[t._v("停用")])])]):t._e(),-1!=e.row.State?a("el-dropdown-item",[a("p",{on:{click:function(a){return t.editorClick(e.row)}}},[t._v("编辑")])]):t._e(),-1!=e.row.State?a("el-dropdown-item",[a("p",{on:{click:function(a){return t.publicClick(e.row)}}},[t._v("公示")])]):t._e(),a("el-dropdown-item",[a("p",{on:{click:function(a){return t.goTaskGClick(e.row)}}},[t._v(" 数据 ")])]),-1!=e.row.State?a("el-dropdown-item",[a("p",{on:{click:function(a){return t.delTaskClick(e.row)}}},[t._v("删除")])]):t._e()],1)],1)]}}])})],1)],1),a("NewTaskAlert",{attrs:{is_add:t.is_add},on:{back:t.newBack,sub:t.subBack}}),a("EditorTaskAlert",{attrs:{is_add:t.is_editor,detail:t.detail},on:{back:t.editorBack,sub:t.subEditorBack}}),a("PublicAlert",{attrs:{is_add:t.is_public,detail:t.public_detail},on:{back:t.publickBack,sub:t.publicSub}}),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"400px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.is_flag?a("el-alert",{staticClass:"ma",attrs:{title:"输入不一致，请重新输入!",type:"error"}}):t._e(),a("el-form",{ref:"ruleForm",staticClass:"margin_top_10",attrs:{model:t.ruleForm,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{prop:"other",label:"为防止误删，请输入完整的任务名"}},[a("el-input",{attrs:{placeholder:"请输入删除任务的任务名"},model:{value:t.ruleForm.other,callback:function(e){t.$set(t.ruleForm,"other",e)},expression:"ruleForm.other"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subDelClick("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},s=[],r=a("184a"),l=a("f3a9"),o=a("4d82"),n=a("5a6e"),c={name:"task_list",components:{NewTaskAlert:r["a"],EditorTaskAlert:l["a"],PublicAlert:o["a"]},data:function(){return{ruleForm:{other:""},rules:{other:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},is_flag:!1,dialogVisible:!1,tasklist:[],is_add:!1,is_editor:!1,detail:{},del_detail:{},is_public:!1}},methods:{goTaskGClick:function(t){this.$router.push({name:"alldataTask",query:{id:Object(n["b"])(t.Code),name:t.Title}})},publicClick:function(t){this.is_public=!0,this.public_detail=t},publickBack:function(t){this.is_public=t},publicSub:function(){this.alltasklist()},switchClick:function(t){var e=this,a=this,i={task_code:t.Code,corpid:this.$store.state.corpid,userid:this.$store.state.userid};0==t.State?i["state"]=2:i["state"]=0;var s=a.$createObj(i),r=s["keyvalue"],l=a.$apilist["switchtaskstate"]+"?signature="+r;a.$server.post(l,s["fd"]).then((function(t){e.$message({type:"success",message:"操作成功!"}),e.alltasklist()})).catch((function(t){}))},delTaskClick:function(t){this.dialogVisible=!0,this.del_detail=t},subDelClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;if(e.ruleForm.other==e.del_detail.Title){e.is_add=!1;var a={userid:e.$store.state.userid,corpid:e.$store.state.corpid,task_code:e.del_detail.Code},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["countoftask"]+"?signature="+s;e.$server.post(r,i["fd"]).then((function(t){e.lastDelClick(t.data)}))}else e.is_flag=!0}))},lastDelClick:function(t){var e=this,a="此操作将永久删除该任务, 是否继续?";t>0&&(a="该任务含有"+t+"条数据，此操作将永久删除该任务, 是否继续?"),this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={userid:e.$store.state.userid,corpid:e.$store.state.corpid,task_code:e.del_detail.Code},a=e.$createObj(t),i=a["keyvalue"],s=e.$apilist["delonetask"]+"?signature="+i;e.$server.post(s,a["fd"]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.dialogVisible=!1,e.ruleForm.other="",e.alltasklist()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.dialogVisible=!1,e.ruleForm.other=""}))},newClick:function(){this.is_add=!this.is_add},newBack:function(t){this.is_add=t},subBack:function(){this.alltasklist()},editorClick:function(t){this.detail=t,this.is_editor=!this.is_editor},editorBack:function(t){this.is_editor=t},subEditorBack:function(){this.alltasklist()},alltasklist:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["alltasklist"]+"?signature="+s;this.$server.post(r,i["fd"]).then((function(e){t.tasklist=e.data})).catch((function(t){}))}},mounted:function(){this.alltasklist()}},u=c,d=a("2877"),p=Object(d["a"])(u,i,s,!1,null,null,null);e["default"]=p.exports},"78df":function(t,e,a){"use strict";a("9453")},9453:function(t,e,a){},a229:function(t,e,a){},b06a:function(t,e,a){"use strict";a("a229")},f3a9:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task_alert"},[a("el-dialog",{attrs:{title:"编辑任务",visible:t.my_is_add,width:"600px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.my_is_add=e}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名",prop:"title"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"时间",prop:"dateval"}},[a("div",{staticClass:"el-input"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.ruleForm.dateval,callback:function(e){t.$set(t.ruleForm,"dateval",e)},expression:"ruleForm.dateval"}})],1)]),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.my_is_add=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subClick("ruleForm")}}},[t._v("保 存")])],1)])],1)},s=[],r={name:"new_task_alert",props:{is_add:Boolean,detail:Object},data:function(){var t=function(t,e,a){if(0==e.length)return a(new Error("请选择日期"));a()};return{my_is_add:!1,ruleForm:{title:"",remark:"",dateval:[]},rules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],dateval:[{validator:t,trigger:"blur"}]}}},methods:{back:function(){this.my_is_add=!1},subClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a={userid:e.$store.state.userid,corpid:e.$store.state.corpid,title:e.ruleForm.title,remark:e.ruleForm.remark,start_date:e.ruleForm.dateval[0],end_date:e.ruleForm.dateval[1],task_code:e.detail.Code},i=e.$createObj(a),s=i["keyvalue"],r=e.$apilist["editonetask"]+"?signature="+s;e.$server.post(r,i["fd"]).then((function(t){e.$message({message:"编辑成功！",type:"success"}),e.back(),e.$emit("sub")}))}))}},watch:{is_add:function(t){this.my_is_add=t,t&&(this.ruleForm={title:this.detail.Title,remark:this.detail.Remark,dateval:[this.detail.StartDate,this.detail.EndDate]})},my_is_add:function(t){this.$emit("back",t)}}},l=r,o=(a("78df"),a("2877")),n=Object(o["a"])(l,i,s,!1,null,null,null);e["a"]=n.exports}}]);