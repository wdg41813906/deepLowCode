(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-492598fe"],{"20f5":function(t,e,i){t.exports=i.p+"img/none.d30ea1a5.png"},"5f32":function(t,e,i){},"5f87":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i("a78e"),a=i.n(s);function r(t){return a.a.get(t)}},a105:function(t,e,i){"use strict";i("5f32")},a3d2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form_list_more frame_right"},[s("div",{staticClass:"type_div bg_task"},[0==t.tasklist.length?s("div",{staticClass:"text_center"},[s("img",{attrs:{src:i("20f5"),alt:""}}),s("p",[t._v("暂无数据")])]):t._e(),t.tasklist.length>0?s("ul",{staticClass:"history_list"},t._l(t.tasklist,(function(e){return s("li",{key:e.Code},[s("i",{staticClass:"el-icon-guide"}),s("a",{on:{click:function(i){return t.goTaskGClick(e)}}},[t._v(t._s(e.Title)+"( "+t._s(new Date(+new Date(new Date(e.StartDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+"至 "+t._s(new Date(+new Date(new Date(e.EndDate).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+")")]),s("span",[t._v(" "+t._s(new Date(+new Date(new Date(e.CreateTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+" ")])])})),0):t._e(),s("div",{staticClass:"pagination_div text_center"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},a=[],r=(i("a9e3"),i("5f87"),i("5a6e")),n=(i("361f"),{name:"form_list",props:{is_more:Boolean,typeid:Number,typename:String},data:function(){return{loading:!1,weburl:this.$store.state.weburl,my_is_more:!1,active:[],num:[],is_add:!1,tasklist:[],is_type_editor:!1,conent_type:"",typeid:"",is_type_editor_item:!1,conent_type_item:"",typeid_item:"",typelist:[],is_form_editor:!1,form_code:"",form_title:"",departlist:[],is_depart:!1,count:0,pagesize:10,currentPage:1,searchval:"",search_falg:!1,departlist_a:"",is_depart_a:!1,depart_a_detail:{},tableProps:{border:!0,"header-cell-style":{background:"#eef1f6",color:"#606266"}}}},methods:{goTaskGClick:function(t){this.$router.push({name:"publicFormFill",query:{id:Object(r["b"])(t.Code),name:t.Title}})},switchClick:function(t){var e=this,i=this,s={task_code:t.Code,corpid:this.$store.state.corpid,userid:this.$store.state.userid};0==t.State?s["state"]=2:s["state"]=0;var a=i.$createObj(s),r=a["keyvalue"],n=i.$apilist["switchtaskstate"]+"?signature="+r;i.$server.post(n,a["fd"]).then((function(t){e.$message({type:"success",message:"操作成功!"}),e.getalltemplateform(e.pagesize,e.currentPage)})).catch((function(t){}))},editorDepartClick:function(t){this.departlist_a=t.ScopeInfo,this.depart_a_detail=t,this.is_depart_a=!this.is_depart_a},handleSizeChange:function(t){this.pagesize=t,this.getalltemplateform(this.pagesize,this.currentPage)},handleCurrentChange:function(t){this.currentPage=t,this.getalltemplateform(this.pagesize,this.currentPage)},delTaskClick:function(t){var e=this;this.$confirm("此操作将永久删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=e,s={task_code:t.Code,corpid:e.$store.state.corpid,userid:e.$store.state.userid},a=i.$createObj(s),r=a["keyvalue"],n=i.$apilist["deltask"]+"?signature="+r;i.$server.post(n,a["fd"]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getalltaskbyuserid()})).catch((function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},authorizationFormClick:function(t){this.is_depart=!0,this.form_code=t.Code,this.departlist=t.CooperationInfo},departBack:function(t){this.is_depart=t},departSub:function(t){var e=this,i=this;for(var s in t)delete t[s].Children,delete t[s].ParentId;var a={cooper:JSON.stringify(t),corpid:this.$store.state.corpid,userid:this.$store.state.userid,code:this.form_code},r=i.$createObj(a),n=r["keyvalue"],o=i.$apilist["updatecooper"]+"?signature="+n;i.$server.post(o,r["fd"]).then((function(t){e.$message({type:"success",message:"授权成功!"}),e.getalltemplateform()})).catch((function(t){}))},editorTaskClick:function(t){this.$router.push({name:"EditorTask",query:{id:Object(r["b"])(t)}})},formEditorClick:function(t){this.is_form_editor=!0,this.form_title=t.Title,this.form_code=t.Code},typeItemEditorClick:function(t){this.is_type_editor_item=!0,this.typeid_item=t.TypeId,this.conent_type_item=t.Code},typeItemEditorSub:function(){var t=this,e=this,i={type_id:this.typeid_item,corpid:this.$store.state.corpid,userid:this.$store.state.userid,code:this.conent_type_item},s=e.$createObj(i),a=s["keyvalue"],r=e.$apilist["edittype"]+"?signature="+a;e.$server.post(r,s["fd"]).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.is_type_editor_item=!1,t.getalltemplateform()})).catch((function(t){}))},typeEditorClick:function(t,e){this.is_type_editor=!0,this.typeid=t,this.conent_type=e},typeEditorSub:function(){var t=this,e=this,i={id:this.typeid,corpid:this.$store.state.corpid,userid:this.$store.state.userid,content:this.conent_type},s=e.$createObj(i),a=s["keyvalue"],r=e.$apilist["editone"]+"?signature="+a;e.$server.post(r,s["fd"]).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.is_type_editor=!1,t.getalltemplateform()})).catch((function(t){}))},delTypeClick:function(t){var e=this,i=this;this.$confirm("删除分类后，给分类的表单会自动归类到【其他】中, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s={id:t,corpid:e.$store.state.corpid,userid:e.$store.state.userid,content:e.content},a=i.$createObj(s),r=a["keyvalue"],n=i.$apilist["delone"]+"?signature="+r;i.$server.post(n,a["fd"]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getalltemplateform()})).catch((function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getalltemplateform:function(t,e){var i=this,s=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,page_size:t,page_index:e},r=s.$createObj(a),n=r["keyvalue"];this.loading=!0;var o=s.$apilist["allpubtask"]+"?signature="+n;s.$server.post(o,r["fd"]).then((function(t){i.loading=!1,i.tasklist=t.data.data,i.count=t.data.count})).catch((function(t){}))},close:function(){this.my_is_more=!1},searchClick:function(t){var e=this,i=this,s={title:t,corpid:this.$store.state.corpid,userid:this.$store.state.userid},a=i.$createObj(s),r=a["keyvalue"],n=i.$apilist["selfcreatesearch"]+"?signature="+r;i.$server.post(n,a["fd"]).then((function(t){e.tasklist=t.data,e.search_falg=!0})).catch((function(t){}))}},mounted:function(){},created:function(){var t=this;this.$watch("searchval",Object(r["d"])((function(e){""==e?(t.search_falg=!1,t.getalltemplateform(t.pagesize,t.currentPage)):t.searchClick(e)}),200)),this.getalltemplateform(this.pagesize,this.currentPage)}}),o=n,c=(i("a105"),i("2877")),l=Object(c["a"])(o,s,a,!1,null,null,null);e["default"]=l.exports}}]);