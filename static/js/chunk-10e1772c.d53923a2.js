(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10e1772c"],{1148:function(e,t,i){"use strict";var a=i("a691"),l=i("1d80");e.exports="".repeat||function(e){var t=String(l(this)),i="",s=a(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(i+=t);return i}},"408a":function(e,t,i){var a=i("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"64dc":function(e,t,i){},"78ca":function(e,t,i){"use strict";i("64dc")},b680:function(e,t,i){"use strict";var a=i("23e7"),l=i("a691"),s=i("408a"),o=i("1148"),r=i("d039"),n=1..toFixed,d=Math.floor,f=function(e,t,i){return 0===t?i:t%2===1?f(e,t-1,i*e):f(e*e,t/2,i)},_=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},c=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){n.call({})}));a({target:"Number",proto:!0,forced:c},{toFixed:function(e){var t,i,a,r,n=s(this),c=l(e),u=[0,0,0,0,0,0],h="",m="0",g=function(e,t){var i=-1,a=t;while(++i<6)a+=e*u[i],u[i]=a%1e7,a=d(a/1e7)},b=function(e){var t=6,i=0;while(--t>=0)i+=u[t],u[t]=d(i/e),i=i%e*1e7},p=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==u[e]){var i=String(u[e]);t=""===t?i:t+o.call("0",7-i.length)+i}return t};if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(h="-",n=-n),n>1e-21)if(t=_(n*f(2,69,1))-69,i=t<0?n*f(2,-t,1):n/f(2,t,1),i*=4503599627370496,t=52-t,t>0){g(0,i),a=c;while(a>=7)g(1e7,0),a-=7;g(f(10,a,1),0),a=t-1;while(a>=23)b(1<<23),a-=23;b(1<<a),g(1,1),b(2),m=p()}else g(0,i),g(1<<-t,0),m=p()+o.call("0",c);return c>0?(r=m.length,m=h+(r<=c?"0."+o.call("0",c-r)+m:m.slice(0,r-c)+"."+m.slice(r-c))):m=h+m,m}})},d6e4:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"lookform_div"},[i("el-form",{attrs:{"label-position":"left","label-width":e.form_data.labelWidth}},[i("el-form-item",{attrs:{label:"表单"}},[e._v(e._s(e.form_data.title)+" ")])],1),i("el-form",{staticClass:"add_form",attrs:{"label-width":e.form_data.labelWidth+"px","label-position":e.form_data.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[""!=e.form_data.remark?i("el-form-item",{staticClass:"remark_style"},[e._v(" "+e._s(e.form_data.remark)+" ")]):e._e(),e._l(e.form_data1.fields,(function(t,a){return i("div",{key:t},["divider"==t.tagIcon||"describe"==t.tagIcon||"describeImg"==t.tagIcon?i("el-form-item",["divider"==t.tagIcon?i("div",[i("el-divider")],1):"describe"==t.tagIcon?i("div",[i("el-tag",[e._v(e._s(t.placeholder))])],1):i("div",[i("el-image",{attrs:{src:t.placeholder}})],1)]):"upload"==t.tagIcon?i("el-form-item",{attrs:{"label-width":t.labelWidth>0?t.labelWidth+"px":e.form_data.labelWidth+"px",label:t.label,"label-position":e.form_data.labelPosition,required:t.required}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.domain,data:e.QiniuData,"on-remove":function(i,a){return e.handleRemoveFile(i,a,t)},"on-error":e.uploadErrorFile,"on-success":function(i,a,l){return e.uploadSuccessFile(i,a,l,t)},"before-remove":function(i,a){return e.beforeRemoveFile(i,a,t)},"before-upload":e.beforeAvatarUploadFile,multiple:"","file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传附件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传不超过20MB的文件 ")])],1)],1):"image"==t.tagIcon?i("el-form-item",{attrs:{"label-width":t.labelWidth>0?t.labelWidth+"px":e.form_data.labelWidth+"px",label:t.label,"label-position":e.form_data.labelPosition,required:t.required}},[i("el-upload",{staticClass:"upload-pic",attrs:{action:e.domain,data:e.QiniuData,"on-remove":function(i,a){return e.handleRemove(i,a,t)},"on-error":e.uploadError,"on-success":function(i,a,l){return e.uploadSuccess(i,a,l,t)},"before-remove":function(i,a){return e.beforeRemove(i,a,t)},"before-upload":e.beforeAvatarUpload,"list-type":"picture-card",multiple:"","file-list":e.imgList}},[i("i",{staticClass:"el-icon-plus"})])],1):"calculate"==t.tagIcon?i("el-form-item",{attrs:{"label-width":t.labelWidth>0?t.labelWidth+"px":e.form_data.labelWidth+"px",label:t.label,"label-position":e.form_data.labelPosition}},[i("span",{staticClass:"calculate_span display_inline_block"},[e._v(" "+e._s(null==t.value?0:t.value)+" ")]),t.enable_assign?i("el-button",{staticClass:"margin_l_15",attrs:{size:"medium",type:"text"},on:{click:function(i){return e.assignClick(t,a)}}},[e._v("分配")]):e._e(),null!=t.assign_data?i("div",[null!=t.assign_data&&0!=t.assign_data.length?i("span",{staticClass:"success"},[e._v(" 未分配值："+e._s(e.calOther(t.value,a,t.assign_data))+" "),i("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.calOther(t.value,a,t.assign_data))+" ")])]):e._e(),e._l(t.assign_data,(function(l,s){return i("div",{key:l,staticClass:"margin_top_10"},[i("el-select",{staticClass:"assign_input",attrs:{filterable:"",placeholder:"请选择被分配人","filter-method":e.dataFilter},on:{change:function(t){return e.assignChange()}},model:{value:l.ToUserId,callback:function(t){e.$set(l,"ToUserId",t)},expression:"assignitem.ToUserId"}},e._l(e.userlist,(function(t){return i("el-option",{key:t.uid,attrs:{label:t.name,value:t.uid}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.uid))])])})),1),i("el-input",{staticClass:"assign_input margin_l_15",attrs:{placeholder:"请填写分配数值"},on:{input:function(i){return e.cal(t.value,t.assign_data,a)}},model:{value:l.ToValue,callback:function(t){e.$set(l,"ToValue",t)},expression:"assignitem.ToValue"}}),i("i",{staticClass:"el-icon-remove assign_icon assign_error danger",on:{click:function(i){return e.removeassign(t,s)}}}),s===t.assign_data.length-1?i("i",{staticClass:"el-icon-circle-plus assign_icon assign_add primary",on:{click:function(i){return e.assignClick(t,a)}}}):e._e()],1)}))],2):e._e()],1):"calculate"!=t.tagIcon?i("el-form-item",{attrs:{"label-width":t.labelWidth>0?t.labelWidth+"px":e.form_data.labelWidth+"px",label:t.label,"label-position":e.form_data.labelPosition,required:t.required}},["input"==t.tagIcon?i("div",[i("el-input",{attrs:{placeholder:t.placeholder,maxlength:t.maxlength,size:"medium"},model:{value:t.value,callback:function(i){e.$set(t,"value","string"===typeof i?i.trim():i)},expression:"item.value"}})],1):e._e(),"coefficient"==t.tagIcon?i("div",[i("p",[e._v(e._s(t.const_value))])]):e._e(),"textarea"==t.tagIcon?i("div",[i("el-input",{attrs:{type:"textarea",rows:3,maxlength:t.maxlength,placeholder:t.placeholder},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1):e._e(),"number"==t.tagIcon?i("div",[i("el-input",{attrs:{placeholder:t.placeholder,size:"medium"},on:{input:function(t){return e.enterClick(t)}},model:{value:t.value,callback:function(i){e.$set(t,"value","string"===typeof i?i.trim():i)},expression:"item.value"}}),t.enable_assign?i("el-button",{staticClass:"margin_l_15",attrs:{size:"medium",type:"text"},on:{click:function(i){return e.assignClick(t,a)}}},[e._v("分配")]):e._e(),null!=t.assign_data?i("div",[null!=t.assign_data&&0!=t.assign_data.length?i("span",{staticClass:"success"},[e._v(" 未分配值："+e._s(e.assign_other[a])+" ")]):e._e(),e._l(t.assign_data,(function(l,s){return i("div",{key:l,staticClass:"margin_top_10"},[i("el-select",{staticClass:"assign_input",attrs:{filterable:"",placeholder:"请选择被分配人","filter-method":e.dataFilter},on:{change:function(t){return e.assignChange()}},model:{value:l.ToUserId,callback:function(t){e.$set(l,"ToUserId",t)},expression:"assignitem.ToUserId"}},e._l(e.userlist,(function(t){return i("el-option",{key:t.uid,attrs:{label:t.name,value:t.uid}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.uid))])])})),1),i("el-input",{staticClass:"assign_input margin_l_15",attrs:{placeholder:"请填写分配数值"},on:{input:function(i){return e.cal(t.value,t.assign_data,a)}},model:{value:l.ToValue,callback:function(t){e.$set(l,"ToValue",t)},expression:"assignitem.ToValue"}}),i("i",{staticClass:"el-icon-remove assign_icon assign_error danger",on:{click:function(i){return e.removeassign(t,s)}}}),s===t.assign_data.length-1?i("i",{staticClass:"el-icon-circle-plus assign_icon assign_add primary",on:{click:function(i){return e.assignClick(t,a)}}}):e._e()],1)}))],2):e._e()],1):e._e(),"date"==t.tagIcon?i("div",[i("el-date-picker",{attrs:{type:"date",placeholder:t.placeholder,size:"medium"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1):e._e(),"select"==t.tagIcon?i("div",[i("el-select",{attrs:{placeholder:t.placeholder,size:"medium"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(t.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"select_number"==t.tagIcon?i("div",[0==t.is_counted?i("span",[e._v(e._s(e.otherfn(t)))]):e._e(),i("el-select",{attrs:{placeholder:t.placeholder,size:"medium"},on:{change:function(t){return e.selectNChage(t)}},model:{value:t.is_counted,callback:function(i){e.$set(t,"is_counted",i)},expression:"item.is_counted"}},e._l(t.options,(function(e){return i("el-option",{key:e.value+"__"+e.label,attrs:{label:e.label,value:e.value+"__"+e.label}})})),1)],1):e._e(),"rate"==t.tagIcon?i("div",[i("el-rate",{attrs:{"allow-half":t["allow-half"]},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1):e._e()]):e._e()],1)}))],2)],1),i("div")])},l=[],s=(i("b680"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("5a6e")),o={name:"lookform",data:function(){return{form_data:{},is_form:!1,form_fields:[],form_data1:{}}},methods:{calOther:function(e,t,i){for(var a in this.assign_other[t]=e,i){if("number"!=typeof i[a].ToValue&&("."==i[a].ToValue.split("")[i[a].ToValue.length-1]||""==i[a].ToValue))break;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(i[a].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;e=this.subtr(e,parseFloat(i[a].ToValue))}return this.assign_other[t]=e,e},cal:function(e,t,i){var a=parseFloat(e);for(var l in t){if("."==t[l].ToValue.split("")[t[l].ToValue.length-1]||""==t[l].ToValue)break;if(!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(t[l].ToValue))return this.$alert(" 分配值请填写数字!","提示",{confirmButtonText:"确定"}),!1;a=this.subtr(a,parseFloat(t[l].ToValue))}this.assign_other[i]=a},subtr:function(e,t){var i,a,l,s;try{i=e.toString().split(".")[1].length}catch(o){i=0}try{a=t.toString().split(".")[1].length}catch(o){a=0}return l=Math.pow(10,Math.max(i,a)),s=i>=a?i:a,((e*l-t*l)/l).toFixed(s)},selectNChage:function(e){this.subClick()},enterClick:function(e){return"."!=e.split("")[e.length-1]&&""!=e&&(/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(e)?void this.subClick():(this.$alert(" 请填写数字!","提示",{confirmButtonText:"确定"}),!1))},assignClick:function(e,t){if(null==e.value||0==e.value)return this.$alert(" 请先填写，再分配!","提示",{confirmButtonText:"确定"}),!1;this.assignChange(),null==e.assign_data?(e.assign_data=[],e["assign_data"].push({ToUserId:"",ToValue:""})):e["assign_data"].push({ToUserId:"",ToValue:""})},otherfn:function(e){return e.is_counted="",""},gettemplateformdetail:function(){var e=this,t=Object(s["a"])(this.$route.query.id),i=this;this.form_code=t;var a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:t},l=i.$createObj(a),o=l["keyvalue"],r=i.$apilist["gettemplateformdetail"]+"?signature="+o;i.$server.post(r,l["fd"]).then((function(t){e.form_data=t.data,e.is_form=!0,e.form_data1=JSON.parse(JSON.stringify(e.form_data)),e.form_fields=e.form_data1.fields})).catch((function(e){}))},getnowdate:function(e){var t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();return a<10&&(a="0"+a),l<10&&(l="0"+l),i+"/"+a+"/"+l},subClick:function(){var e=this,t=[];for(var i in this.form_fields)if(this.form_fields[i].required)if("number"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:parseFloat(this.form_fields[i].value)});else{if("divider"==this.form_fields[i].tagIcon||"describe"==this.form_fields[i].tagIcon)continue;"select_number"==this.form_fields[i].tagIcon?t.push({field_code:this.form_fields[i].filed_code,opt_label:this.form_fields[i].is_counted,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:!1,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:parseFloat(this.form_fields[i].is_counted.split("__")[0])}):"date"==this.form_fields[i].tagIcon?t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:this.getnowdate(this.form_fields[i].value)}):"image"==this.form_fields[i].tagIcon?t.push({field_code:this.form_fields[i].filed_code,opt_label:"image",field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:!1,enable_assign:this.form_fields[i].enable_assign,value:this.form_fields[i].value}):"upload"==this.form_fields[i].tagIcon?t.push({field_code:this.form_fields[i].filed_code,opt_label:"file",field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:!1,enable_assign:this.form_fields[i].enable_assign,value:this.form_fields[i].value}):t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:this.form_fields[i].value})}else if("number"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:parseFloat(this.form_fields[i].value)});else if("select_number"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,opt_label:this.form_fields[i].is_counted,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:!1,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:parseFloat(this.form_fields[i].is_counted.split("__")[0])});else if("date"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:this.getnowdate(this.form_fields[i].value)});else if("image"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,opt_label:"image",field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:this.form_fields[i].value});else if("upload"==this.form_fields[i].tagIcon)t.push({field_code:this.form_fields[i].filed_code,opt_label:"file",field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:this.form_fields[i].enable_assign,value:this.form_fields[i].value});else{if("divider"==this.form_fields[i].tagIcon||"describe"==this.form_fields[i].tagIcon)continue;var a=this.form_fields[i].enable_assign;t.push({field_code:this.form_fields[i].filed_code,field_label:this.form_fields[i].label,join_gather:this.form_fields[i].join_gather,is_counted:this.form_fields[i].is_counted,enable_greater:this.form_fields[i].enable_greater,enable_assign:a,value:this.form_fields[i].value})}var l=this,s={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.form_data.form_code,rule_file_info:JSON.stringify(t)},o=l.$createObj(s),r=o["keyvalue"],n=l.$apilist["countfunction"]+"?signature="+r;l.$server.post(n,o["fd"]).then((function(t){if(t.data.length>0)for(var i in t.data)for(var a in e.form_data1.fields)e.form_data1.fields[a].filed_code==t.data[i].field_code&&(e.form_data1.fields[a].value=t.data[i].value)})).catch((function(e){}))}},mounted:function(){this.gettemplateformdetail()}},r=o,n=(i("78ca"),i("2877")),d=Object(n["a"])(r,a,l,!1,null,null,null);t["default"]=d.exports}}]);