(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8f6b17a"],{"22e7":function(e,t,a){},2958:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form_list_fill"},[e.is_more?e._e():a("div",[a("div",{staticClass:"top_form"},[a("span",{staticClass:"name_span"},[e._v(e._s(e.$route.query.name)+"表单")]),a("span",{staticClass:"right"},[a("el-input",{staticClass:"width_150",attrs:{placeholder:"搜索",size:"small"},model:{value:e.filters[0].value,callback:function(t){e.$set(e.filters[0],"value",t)},expression:"filters[0].value"}}),a("el-button",{staticClass:"margin_l_15",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){return e.fillClick()}}},[e._v("添加")]),a("el-button",{staticClass:"margin_l_15",attrs:{icon:"el-icon-upload",size:"small"},on:{click:function(t){return e.gourl()}}},[e._v("批量导入")]),a("el-button",{staticClass:"margin_l_15",attrs:{icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.batchdel()}}},[e._v("删除")]),a("router-link",{staticClass:"margin_l_15",attrs:{to:{name:"alldataATask",query:{id:e.$route.query.taskcode,taskcode:e.$route.query.taskcode,k:Date.now(),name:e.$route.query.taskname}}}},[a("el-button",{attrs:{icon:"iconfont icon-cancel",size:"small"}},[e._v("返回")])],1)],1)]),0==e.tableData.length?a("div",{staticClass:"text_center"},[a("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"pagination-props":{pageSizes:[5,10,15]},"row-key":e.row_key,"expand-row-keys":e.expandRowKeys,"table-props":e.tableProps},on:{"selection-change":e.handleSelectionChange}},e._l(e.filed_infos,(function(e){return a("el-table-column",{key:e,attrs:{label:e.label}})})),1)],1):a("div",[a("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,filters:e.filters,"pagination-props":{pageSizes:[5,10,15]},"row-key":e.row_key,"expand-row-keys":e.expandRowKeys,"table-props":e.tableProps},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"65"}}),a("el-table-column",{attrs:{label:"工号",prop:"CreateUserId"}}),a("el-table-column",{attrs:{label:"姓名",prop:"CreateUserName"}}),a("el-table-column",{attrs:{label:"部门",prop:"Department"}}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(" "+e._s(new Date(+new Date(new Date(t.row.CreateTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,-3).split(" ")[0])+" ")])]}}],null,!1,4081946848)}),e._l(e.tableData[0].FormFieldInfos,(function(t,l){return a("el-table-column",{directives:[{name:"show",rawName:"v-show",value:"describe"!=t.tagIcon,expression:"item.tagIcon != 'describe'"}],key:t,attrs:{prop:"name",label:t.field_label},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.FormFieldInfos[l].opt_label&&"image"!=t.row.FormFieldInfos[l].opt_label&&"file"!=t.row.FormFieldInfos[l].opt_label?a("p",[e._v(" "+e._s(t.row.FormFieldInfos[l].opt_label.split("__")[1])+" ")]):null!=t.row.FormFieldInfos[l].assign_data&&t.row.FormFieldInfos[l].assign_data.length>0?a("div",[e._v(" "+e._s(t.row.FormFieldInfos[l].value)+" ")]):"image"==t.row.FormFieldInfos[l].opt_label||"file"==t.row.FormFieldInfos[l].opt_label?a("div",e._l(t.row.FormFieldInfos[l].value,(function(t){return a("p",{key:t},[a("span",{staticClass:"upload_list_span",on:{click:function(a){return e.goimg(t.url)}}},[e._v(" "+e._s(t.name)+" ")])])})),0):a("p",[e._v(" "+e._s(t.row.FormFieldInfos[l].value)+" ")])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flow-permisson-row"},[a("span",{staticClass:"cursor",on:{click:function(a){return e.logClick(t.row.Code)}}},[0==t.row.State?a("span",{staticClass:"flow_per"},[e._v("未提交")]):1==t.row.State?a("span",{staticClass:"flow_per warning"},[e._v("已提交")]):2==t.row.State?a("span",{staticClass:"flow_per danger"},[e._v("驳回")]):3==t.row.State?a("span",{staticClass:"flow_per success"},[e._v("已通过")]):4==t.row.State?a("span",{staticClass:"flow_per warning"},[e._v("审核中")]):5==t.row.State?a("span",{staticClass:"flow_per success"},[e._v("已通过")]):6==t.row.State?a("span",{staticClass:"flow_per"},[e._v("导入数据")]):e._e()]),1==t.row.AssignState?a("span",{staticClass:"margin_l_5 flow_per"},[e._v("(分配未完成)")]):e._e()])]}}],null,!1,1001985526)}),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("p",{on:{click:function(a){return e.detailClick(t.row)}}},[e._v("详情")])]),0==t.row.State||2==t.row.State||6==t.row.State?a("el-dropdown-item",[a("p",{on:{click:function(a){return e.ediotrFillClick(t.row)}}},[e._v(" 编辑 ")])]):e._e(),a("el-dropdown-item",[a("p",{on:{click:function(a){return e.delClick(t.row.Code)}}},[e._v(" 删除 ")])])],1)],1)]}}],null,!1,3714906522)})],2)],1)]),a("FillAlert",{attrs:{is_add:e.is_add,form_data:e.formdetail,task_code:e.task_code},on:{back:e.fillBack,subback:e.subFillBack}}),a("FillEditorAlert",{attrs:{is_add:e.is_editor,form_data:e.formdetail,main_code:e.main_code,task_code:e.task_code,detail:e.detail},on:{back:e.fillEBack,subback:e.subFillEBack}}),a("DetailAlert",{attrs:{is_add:e.is_detail,detail:e.detail,form_data:e.formdetail},on:{back:e.detailBack,otherback:e.otherDetailBack}}),a("LogAlert",{attrs:{is_add:e.is_log,code:e.logcode},on:{back:e.logBack}})],1)},i=[],o=(a("b0c0"),a("ade3")),s=(a("5f87"),a("5a6e")),r=a("1d90"),n=a("7239"),d=a("56bf"),c=a("7f91"),u={name:"form_list",components:{DetailAlert:d["a"],LogAlert:c["a"],FillAlert:r["a"],FillEditorAlert:n["a"]},data:function(){var e;return e={is_detail:!1,is_editor:!1,is_add:!1,filters:[{prop:["CreateUserName","Department","CreateUserId","FormName"],value:""}],name:"",is_log:!1,logcode:"",corpid:this.$store.state.corpid,dialogTableVisible:!1,formdetail:{},form_code:"",task_code:""},Object(o["a"])(e,"is_add",!1),Object(o["a"])(e,"is_editor",!1),Object(o["a"])(e,"tableData",[]),Object(o["a"])(e,"main_code",""),Object(o["a"])(e,"dellist",[]),Object(o["a"])(e,"TypeId",0),Object(o["a"])(e,"auditkey",[]),Object(o["a"])(e,"audit_key_list",[]),Object(o["a"])(e,"select_auditcode",""),Object(o["a"])(e,"select_depart",""),Object(o["a"])(e,"is_detail",!1),Object(o["a"])(e,"detail",{}),Object(o["a"])(e,"filed_infos",[]),Object(o["a"])(e,"tableProps",{border:!0,"header-cell-style":{background:"#eef1f6",color:"#606266"}}),e},methods:{ediotrFillClick:function(e){this.main_code=e.Code,this.detail=e,this.is_editor=!this.is_editor},fillEBack:function(e){this.is_editor=e},subFillEBack:function(){this.allmaindatabyformcodeanduserid()},subFillBack:function(){this.allmaindatabyformcodeanduserid()},fillClick:function(){this.is_add=!this.is_add},fillBack:function(e){this.is_add=e},detailClick:function(e){this.is_detail=!this.is_detail,this.detail=e},detailBack:function(e){this.is_detail=e},otherDetailBack:function(){this.allmaindatabyformcodeanduserid()},gourl:function(){this.$router.push({name:"importATask",query:{id:this.$route.query.id,taskcode:this.$route.query.taskcode,taskname:this.$route.query.taskname,name:this.$route.query.name}})},goimg:function(e){return window.open(e),!1},allmaindatabyformcodeanduserid:function(){var e=this,t=this,a=this.$route.query.id;this.task_code=Object(s["a"])(this.$route.query.taskcode);var l={corpid:this.$store.state.corpid,form_code:Object(s["a"])(a),task_code:this.task_code},i=t.$createObj(l),o=i["keyvalue"],r=t.$apilist["allmaindatabyimportuserid"]+"?signature="+o;t.$server.post(r,i["fd"]).then((function(t){if(e.tableData=t.data,0==t.data.length)for(var a in e.filed_infos=[],t.filed_infos)e.filed_infos.push({label:t.filed_infos[a].label})})).catch((function(e){}))},getformdetail:function(){var e=this,t=this;this.form_code=Object(s["a"])(this.$route.query.id);var a={corpid:this.$store.state.corpid,userid:this.$store.state.userid,form_code:this.form_code},l=t.$createObj(a),i=l["keyvalue"],o=t.$apilist["formdetail"]+"?signature="+i;t.$server.post(o,l["fd"]).then((function(t){e.formdetail=t.data,e.formdetail.form_code=e.form_code})).catch((function(e){}))}},mounted:function(){this.allmaindatabyformcodeanduserid(),this.getformdetail()}},_=u,f=(a("60d8"),a("2877")),p=Object(f["a"])(_,l,i,!1,null,null,null);t["default"]=p.exports},"60d8":function(e,t,a){"use strict";a("22e7")}}]);