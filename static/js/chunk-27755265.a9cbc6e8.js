(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27755265"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"2efc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gatherlist"},[t._m(0),a("el-row",[a("el-col")],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{},attrs:{label:"任务"}},[a("el-select",{attrs:{size:"small"},model:{value:t.task_code,callback:function(e){t.task_code=e},expression:"task_code"}},t._l(t.tasklist,(function(t){return a("el-option",{key:t,attrs:{label:t.Title,value:t.Code}})})),1),a("el-button",{staticClass:"margin_l_5",attrs:{size:"small"},on:{click:function(e){return t.search(2)}}},[t._v("搜索")]),a("el-button",{staticClass:"margin_l_5",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出")])],1)],1),a("el-card",[a("div",{staticClass:"content sun_content"},[a("div",{staticClass:"margin_b_10"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"工号/姓名/学院",size:"small"},model:{value:t.filters[0].value,callback:function(e){t.$set(t.filters[0],"value",e)},expression:"filters[0].value"}})],1),a("div",{staticClass:"sum_table"},[a("data-tables",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"refTable",attrs:{filters:t.filters,data:t.gather_list,"pagination-props":{pageSizes:[10,15,30]},"table-props":t.tableProps},on:{"selection-change":t.handleSelectionChange,"row-click":t.clickTable}},[t._l(t.titles_one,(function(t){return a("el-table-column",{key:t,attrs:{label:t.label,prop:t.prop}})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return t.gourlClick(e.row)}}},[t._v("详情")])],1)]}}])})],2)],1)])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top_form"},[a("span",{staticClass:"name_span"},[t._v("汇总")])])}],l=(a("b0c0"),a("ac1f"),a("841c"),a("ade3")),r=a("5a6e"),n={name:"gatherlist",data:function(){return Object(l["a"])({loading:!1,terms:"",task_code:"",gather_list:[],filterText:"",departid:"",departlist:[],filters:[{prop:["userid","user_name","depart","career","position","user_state"],value:""}],rule_list:[],rule_list_key:[],title:"",code:"",assignlist:[],tableProps:{border:!0,"header-cell-style":{background:"#eef1f6",color:"#606266"}},is_detail:!1,detail:{},formdetail:{},termlist:[],tasklist:[],titles_one:[{prop:"userid",label:"工号"},{prop:"user_name",label:"姓名"},{prop:"depart",label:"学院"},{prop:"理论课",label:"理论课"},{prop:"实验课",label:"实验课"},{prop:"上机课",label:"上机课"},{prop:"实践课",label:"实践课"},{prop:"课程设计",label:"课程设计"},{prop:"毕业设计",label:"毕业设计"},{prop:"实习",label:"实习"},{prop:"大创",label:"大创"},{prop:"其他",label:"其他"},{prop:"合计",label:"合计"},{prop:"金石滩计划学时",label:"金石滩计划学时"}],titles_two:["全日制本科","非全日制本科","继续教育、职业教育、专科","学术型研究生","全日制专业型硕士","非全日制专业型硕士","MBA专业硕士","本科生毕业论文","硕士生毕业论文","博士生毕业论文","硕士生日常指导","博士生日常指导","辅修、双学位","本科生双创项目","补贴工作量","授课工作量补贴","非授课工作量补贴","补贴备注","非授课工作量","授课工作量","其他"]},"gather_list","")},methods:{gourlClick:function(t){this.$router.push({name:"filllistAudit",query:{num:Object(r["b"])("2"),userid:Object(r["b"])(t.userid),id:Object(r["b"])(this.task_code)}})},search:function(t){var e=this,a=this;if(""==this.task_code)return this.$alert("请选择任务！","提示",{confirmButtonText:"确定"}),!1;var i={task_code:this.task_code},s=a.$createObj(i),l=s["keyvalue"],r=a.$apilist["alluserdatagatherbytask"]+"?signature="+l;this.loading=!0,a.$server.post(r,s["fd"]).then((function(t){e.loading=!1,e.gather_list=t.data})).catch((function(t){}))},getterm:function(){var t=this,e={userid:this.$store.state.userid,corpid:this.$store.state.corpid},a=this.$createObj(e),i=a["keyvalue"],s=this.$apilist["term"]+"?signature="+i;this.$server.post(s,a["fd"]).then((function(e){t.termlist=e.data.reverse()}))},alltasklist:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid},i=e.$createObj(a),s=i["keyvalue"],l=e.$apilist["alltasklist"]+"?signature="+s;this.$server.post(l,i["fd"]).then((function(e){t.tasklist=e.data,t.task_code=e.data[0].Code,t.search(2)})).catch((function(t){}))},detailClick:function(t){this.is_detail=!this.is_detail,this.detail=t},detailBack:function(t){this.is_detail=t},getgather:function(){var t=this,e=this.$route.query.id;this.code=Object(r["a"])(e),this.title=this.$route.query.name,this.taskid=e;var a=this,i={corpid:this.$store.state.corpid,userid:this.$store.state.userid,task_code:Object(r["a"])(e)},s=a.$createObj(i),l=s["keyvalue"],n=a.$apilist["datagather"]+"?signature="+l;this.gather_list=[],this.rule_list=[],this.rule_list_key=[],a.$server.post(n,s["fd"]).then((function(e){t.gather_list=e.data})).catch((function(t){}))},level2departmap:function(){var t=this,e=this,a={corpid:this.$store.state.corpid,userid:this.$store.state.userid},i=e.$createObj(a),s=i["keyvalue"],l=e.$apilist["level2departmap"]+"?signature="+s;this.gather_list=[],this.rule_list=[],this.rule_list_key=[],e.$server.post(l,i["fd"]).then((function(e){t.departlist=e.data})).catch((function(t){}))},exportExcel:function(){var t=this,e=this;if(""==this.task_code)return this.$alert("请选择任务！","提示",{confirmButtonText:"确定"}),!1;var a={task_code:this.task_code},i=e.$createObj(a),s=i["keyvalue"],l=e.$apilist["exportallgatherexcel"]+"?signature="+s;e.$server.post(l,i["fd"]).then((function(e){window.location.href=t.$store.state.imgurl+"/"+e.data.path})).catch((function(t){}))}},mounted:function(){this.alltasklist(),this.level2departmap()}},o=n,c=(a("35d8"),a("2877")),u=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=u.exports},"35d8":function(t,e,a){"use strict";a("d10e")},"841c":function(t,e,a){"use strict";var i=a("d784"),s=a("825a"),l=a("1d80"),r=a("129f"),n=a("14c3");i("search",1,(function(t,e,a){return[function(e){var a=l(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var l=s(t),o=String(this),c=l.lastIndex;r(c,0)||(l.lastIndex=0);var u=n(l,o);return r(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},d10e:function(t,e,a){}}]);